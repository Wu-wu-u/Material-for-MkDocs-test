{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u8ba1\u79d1\u57f9\u517b\u65b9\u6848","text":""},{"location":"Build_Website/Tutorial/","title":"Publish a Website with Material for MkDocs and GitHub Pages","text":""},{"location":"Build_Website/Tutorial/#mkdocs-new","title":"mkdocs new","text":"<pre><code>$ mkdocs new mkdocs-site\nINFO     -  Creating project directory: mkdocs-site\nINFO     -  Writing config file: mkdocs-site/mkdocs.yml\nINFO     -  Writing initial docs: mkdocs-site/docs/index.md\n$ cd mkdocs-site\n</code></pre> <pre><code>$ tree -a\n.\n\u251c\u2500\u2500 docs\n\u2502   \u2514\u2500\u2500 index.md\n\u2514\u2500\u2500 mkdocs.yml\n</code></pre>"},{"location":"Build_Website/Tutorial/#add-github-workflow","title":"Add GitHub Workflow","text":"<pre><code>$ mkdir .github\n$ cd .github\n$ mkdir workflows\n$ cd workflows\n$ vim PublishMySite.yml\n</code></pre> <pre><code>name: publish site\non: # \u5728\u4ec0\u4e48\u65f6\u5019\u89e6\u53d1\u5de5\u4f5c\u6d41\n  push: # \u5728\u4ece\u672c\u5730main\u5206\u652f\u88abpush\u5230GitHub\u4ed3\u5e93\u65f6\n    branches:\n      - main\n  pull_request: # \u5728main\u5206\u652f\u5408\u5e76\u522b\u4eba\u63d0\u7684pr\u65f6\n    branches:\n      - main\njobs: # \u5de5\u4f5c\u6d41\u7684\u5177\u4f53\u5185\u5bb9\n  deploy:\n    runs-on: ubuntu-latest # \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u4e91\u7aef\u865a\u62df\u673a \u4f7f\u7528\u6700\u65b0Ubuntu\u7cfb\u7edf\n    steps:\n      - uses: actions/checkout@v2 # \u5148checkout\u5230main\u5206\u652f\n      - uses: actions/setup-python@v2 # \u518d\u5b89\u88c5Python3\u548c\u76f8\u5173\u73af\u5883\n        with:\n          python-version: 3.x\n      - run: pip install mkdocs-material # \u4f7f\u7528pip\u5305\u7ba1\u7406\u5de5\u5177\u5b89\u88c5mkdocs-material\n      - run: mkdocs gh-deploy --force # \u4f7f\u7528mkdocs-material\u90e8\u7f72gh-pages\u5206\u652f\n</code></pre> <pre><code>$ tree -a\n.\n\u251c\u2500\u2500 .github\n\u2502   \u251c\u2500\u2500 .DS_Store\n\u2502   \u2514\u2500\u2500 workflows\n\u2502       \u2514\u2500\u2500 PublishMySite.yml\n\u251c\u2500\u2500 docs\n\u2502   \u2514\u2500\u2500 index.md\n\u2514\u2500\u2500 mkdocs.yml\n</code></pre>"},{"location":"Build_Website/Tutorial/#git-and-github","title":"Git and GitHub","text":""},{"location":"Build_Website/Tutorial/#git-init","title":"git init","text":"<pre><code>$ git init\n$ git add .\n$ git commit -m \"init\"\n</code></pre>"},{"location":"Build_Website/Tutorial/#github-new-repository","title":"GitHub - New Repository","text":"<p>GitHub &gt; New Repository</p> <p>GitHub &gt; Repository &gt; Settings &gt; Actions &gt; General &gt; </p> <ul> <li>Actions permissions: Allow all actions and reusable workflows</li> <li>Workflow permissions: Read and write permissions</li> <li>Click Save</li> </ul> <pre><code>$ git remote add origin git@github.com:Yang-Xijie/mkdocs-site.git # change to your github repo\n$ git branch -M main\n$ git push -u origin main\n</code></pre> <p>GitHub &gt; Repository &gt; Settings &gt; Pages &gt; Source &gt; gh-pages &gt; Click Save</p>"},{"location":"Build_Website/Tutorial/#postscript","title":"Postscript","text":"<p>Modify your markdown files in docs/, make a new commit and push your site to GitHub. GitHub will automatically publish the newest contents.</p>"},{"location":"LCDF_Report/Report/","title":"\u903b\u8f91\u8bbe\u8ba1\u601d\u8def","text":""},{"location":"LCDF_Report/Report/#_2","title":"\u6574\u4f53\u8bbe\u8ba1","text":"<p>\u8d2a\u5403\u86c7\uff08Snake\uff09\u662f\u4e00\u4e2a\u8d77\u6e90\u4e8e1976\u5e74\u7684\u8857\u673a\u6e38\u620f Blockade\u3002 \u5728\u6e38\u620f\u4e2d\uff0c\u73a9\u5bb6\u64cd\u63a7\u4e00\u6761\u7ec6\u957f\u7684\u76f4\u7ebf\uff08\u4fd7\u79f0\u86c7\u6216\u866b\uff09\uff0c\u5b83\u4f1a\u4e0d\u505c\u524d\u8fdb\uff0c\u73a9\u5bb6\u53ea\u80fd\u64cd\u63a7\u86c7\u7684\u5934\u90e8\u671d\u5411\uff08\u4e0a\u4e0b\u5de6\u53f3\uff09\uff0c\u4e00\u8def\u62fe\u8d77\u89e6\u78b0\u5230\u4e4b\u7269\uff08\u6216\u79f0\u4f5c\u201c\u8c46\u201d\uff09\uff0c\u5e76\u8981\u907f\u514d\u89e6\u78b0\u5230\u81ea\u8eab\u6216\u8005\u5176\u4ed6\u969c\u788d\u7269\u3002\u6bcf\u6b21\u8d2a\u5403\u86c7\u5403\u6389\u4e00\u4ef6\u98df\u7269\uff0c\u5b83\u7684\u8eab\u4f53\u4fbf\u589e\u957f\u4e00\u4e9b\u3002 \u672c\u7a0b\u5e8f\u8bbe\u8ba1\u4e86\u7b80\u6613\u7248\u672c\u7684\u8d2a\u5403\u86c7\u6e38\u620f\uff0c\u5305\u542b\u5f00\u59cb\u548c\u7ed3\u675f\u754c\u9762\u4ee5\u53ca\u6e38\u73a9\u754c\u9762\uff0c\u56db\u5468\u4e3a\u4e0d\u53ef\u7a7f\u8d8a\u7684\u969c\u788d\u7269\uff0c\u86c7\u53ef\u4ee5\u901a\u8fc7\u5403\u4e0b\u4e09\u79cd\u4e0d\u540c\u5927\u5c0f\u7684Food\u6765\u83b7\u5f971-3\u7684\u5f97\u5206\u4ee5\u53ca\u957f\u5ea6\u7684\u589e\u52a0\u3002</p> <p></p> <p>\u91c7\u7528Top-Down\u8bbe\u8ba1\u601d\u8def\uff0c\u7531top\u6a21\u5757\u6765\u7ec4\u7ec7\u8fde\u63a5\u5176\u4ed6\u5b50\u6a21\u5757\uff0c\u5176\u4e2d\u4e3b\u8981\u7684\u529f\u80fd\u6a21\u5757\u6709Ps2,Run\uff08\u8fd0\u52a8\u6a21\u5757\uff09,VGA,State\uff08\u72b6\u6001\u673a\uff09,DispNum\uff08\u6570\u7801\u7ba1\u663e\u793a\uff09,beep\uff08\u8702\u9e23\u5668\uff09;\u4f7f\u7528IP\u6838\u6765\u5b58\u50a8\u56fe\u7247\u7b49\u6570\u636e\u3002</p> <p>\u5c06640*480\u7684\u5c4f\u5e55\uff0c\u4ee516*16\u4e3a\u5355\u5143\u683c\uff0c\u5212\u5206\u4e3a40*30\u7684\u533a\u57df\u3002 \u6211\u4eec\u5c06\u6bcf\u4e2a\u5355\u5143\u683c\u7ed9\u4e88\u4e00\u4e2astate\u72b6\u6001\u503c\uff0c\u5206\u4e3a `0: \u80cc\u666f\u683c\uff0c1: \u86c7\u5934\uff0c2: \u86c7\u8eab\uff0c3: Small_Food\uff0c4: Medium_Food\uff0c5: Large_Food\uff0c6: \u6b7b\u4ea1\u683c\u3002</p>"},{"location":"LCDF_Report/Report/#1ps2","title":"1.PS2\u8bbe\u8ba1\u601d\u8def","text":""},{"location":"LCDF_Report/Report/#_3","title":"\u8fd0\u884c\u539f\u7406","text":"<p>PS/2 \u901a\u4fe1\u534f\u8bae\u662f\u4e00\u79cd\u53cc\u5411\u540c\u6b65\u4e32\u884c\u901a\u4fe1\u534f\u8bae\u3002\u901a\u4fe1\u7684\u4e24\u7aef\u901a\u8fc7 CLOCK(\u65f6\u949f\u811a)\u540c\u6b65\uff0c\u5e76\u901a\u8fc7\u56fd DATA(\u6570\u636e\u811a)\u4ea4\u6362\u6570\u636e\u3002\u4e00\u822c\u4e24\u8bbe\u5907\u95f4\u4f20\u8f93\u6570\u636e\u7684\u6700\u5927\u65f6\u949f\u9891\u7387\u662f 33kHz\uff0c\u5927\u591a\u6570 PS/2 \u8bbe\u5907\u5de5\u4f5c\u5728 10--20kHz\u3002\u63a8\u8350\u503c\u5728 15kHz \u5de6\u53f3\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0cCLOCK \u9ad8\u3001\u4f4e\u7535\u5e73\u7684\u6301\u7eed\u65f6\u95f4\u90fd\u4e3a 40us\u3002\u6bcf\u4e00\u6570\u636e\u5e27\u5305\u542b 11\u201412 \u4f4d\uff0c\u5177\u4f53\u542b\u4e49\u5982\u4e0b\u56fe\u793a\u3002 |\u6570\u636e|\u542b\u4e49| |---|---| 1\u4e2a\u8d77\u59cb\u4f4d|\u603b\u662f\u903b\u8f91 0 8\u4e2a\u6570\u636e\u4f4d|(LSB)\u5730\u4f4d\u5728\u524d 1 \u4e2a\u5947\u5076\u6821\u9a8c\u4f4d|\u5947\u6821\u9a8c 1 \u4e2a\u505c\u6b62\u4f4d|\u603b\u662f\u903b\u8f91 1 1 \u4e2a\u5e94\u7b54\u4f4d|\u4ec5\u7528\u5728\u4e3b\u673a\u5bf9\u8bbe\u5907\u7684\u901a\u4fe1\u4e2d</p> <p>PS/2 \u5230\u4e3b\u673a\u7684\u901a\u4fe1\u65f6\u5e8f\u5982\u4e0b\u56fe\u6240\u793a\u3002\u6570\u636e\u5728 PS/2 \u65f6\u949f\u7684\u4e0b\u964d\u6cbf\u8bfb\u53d6\uff0cPS/2 \u7684\u65f6\u949f\u9891\u7387\u4e3a 10\u201416.7kHz\u3002\u5bf9\u4e8e PS/2 \u8bbe\u5907\uff0c\u4e00\u822c\u6765\u8bf4\u4ece\u65f6\u949f\u8109\u51b2\u7684\u4e0a\u5347\u6cbf\u5230\u4e00\u4e2a\u6570\u636e\u8f6c\u53d8\u7684\u65f6\u95f4\u81f3\u5c11\u8981\u6709 5us\uff1b\u6570\u636e\u53d8\u5316\u5230\u4e0b\u964d\u6cbf\u7684\u65f6\u95f4\u81f3\u5c11\u8981\u6709 5us\uff0c\u5e76\u4e14\u4e0d\u5927\u4e8e 25us\uff0c\u8fd9\u4e2a\u65f6\u5e8f\u975e\u5e38\u91cd\u8981\u5e94\u8be5\u4e25\u683c\u9075\u5faa\u3002\u4e3b\u673a\u53ef\u4ee5\u518d\u7b2c 11 \u4e2a\u65f6\u949f\u8109\u51b2\u505c\u6b62\u4f4d\u4e4b\u524d\u628a\u65f6\u949f\u7ebf\u62c9\u4f4e\uff0c\u4f7f\u8bbe\u5907\u653e\u5f03\u53d1\u9001\u5f53\u524d\u5b57\u8282\uff0c\u5f53\u7136\u8fd9\u79cd\u60c5\u51b5\u6bd4\u8f83\u5c11\u89c1\u3002\u5728\u505c\u6b62\u4f4d\u53d1\u9001\u540e\u8bbe\u5907\u5728\u53d1\u9001\u4e0b\u4e2a\u5305\u524d\u5e94\u8be5\u81f3\u5c11\u7b49\u5f85 50us\uff0c\u7ed9\u4e3b\u673a\u65f6\u95f4\u505a\u76f8\u5e94\u7684\u5904\u7406\u3002\u4e0d\u4e3b\u673a\u5904\u7406\u63a5\u6536\u5230\u7684\u5b57\u8282\u65f6\u4e00\u822c\u4f1a\u6291\u5236\u53d1\u9001(\u4e3b\u673a\u5728\u6536\u5230\u6bcf\u4e2a\u5305\u65f6\u901a\u5e38\u81ea\u52a8\u505a\u8fd9\u4e2a)\u3002\u5728\u4e3b\u673a\u91ca\u653e\u6291\u5236\u540e\uff0c\u8bbe\u5907\u81f3\u5c11\u5e94\u8be5\u5728\u53d1\u9001\u4efb\u4f55\u6570\u636e\u524d\u7b49 50us\u3002  \u8be5\u7a0b\u5e8f\u4e2d\u6211\u4eec\u9700\u8981\u7528\u5230\u4e0a\u4e0b\u5de6\u53f3\u56db\u4e2a\u6309\u952e\uff0c\u5bf9\u5e94ps2\u952e\u76d8\u7684\u901a\u7801\u8868\u8fdb\u884c\u4ee3\u7801\u7f16\u5199\u3002 </p>"},{"location":"LCDF_Report/Report/#_4","title":"\u4ee3\u7801\u601d\u8def\uff1a","text":""},{"location":"LCDF_Report/Report/#11","title":"1.1 \u8f93\u5165\u8f93\u51fa\u4fe1\u53f7","text":"<pre><code>module ps2(\n    input clk,\n    input rst,\n    input ps2_clk,\n    input ps2_data,\n    output reg [8:0] data\n    );\n    reg [1:0] clk_state;\n    wire neg; // \u63a2\u6d4bps2_clk\u7684\u8d1f\u8fb9\u6cbf\n    assign neg = ~clk_state[0] &amp; clk_state[1];\n    reg [3:0] r_state;// \u8ba1\u65f6\n    reg [7:0] r_data; // \u5b58\u50a8\u4e34\u65f6\u6570\u636e\n    reg f,e; //\u662f\u5426\u7279\u6b8a\u6570\u636e\n    always @(posedge clk or negedge rst) //\u521d\u59cb\u5316clk_state\n        if(!rst)\n            clk_state &lt;= 2'b00;\n        else\n            clk_state &lt;= {clk_state[0], ps2_clk};\n    always @(posedge clk or negedge rst) begin //\u521d\u59cb\u5316\u6570\u636e\n        if(!rst) begin\n            r_state &lt;= 4'b0000;\n            r_data &lt;= 8'b00000000;\n            f &lt;= 1'b0;\n            e &lt;= 1'b0;\n            data &lt;= 9'b000000000;\n        end\n        else if(neg) begin  \n            if(r_state &gt; 4'b1001) //\u8bfb\u53d6\u5b8c\u4e00\u6574\u4e32\u6570\u636e\u540e\u91cd\u7f6e\u8ba1\u65f6\u4fe1\u53f7\n                r_state &lt;=4'b0000; \n            else begin\n                if(r_state &lt; 4'b1001&amp;&amp;r_state&gt;4'b0)\n                    r_data[r_state-1]&lt;= ps2_data;  //\u5b58\u5165ps2_data\n                r_state &lt;= r_state + 1'b1;\n            end\n        end\n        else if(r_state==4'b1010&amp;&amp;|r_data)begin\n            if(r_data ==8'hf0) \n                f &lt;=1'b1;\n            else if(r_data ==8'he0)\n                e &lt;=1'b1;\n            else\n                if(f)begin  //\u4ee3\u8868\u65ad\u7801\uff0c\u91cd\u7f6e\u4fe1\u53f7\n                    data&lt;=9'b0;\n                    f&lt;=1'b0;\n                    e&lt;=1'b0;\n                end\n                else if(e)begin //\u5728data\u5934\u90e8\u8f93\u51651\u4ee3\u8868\u5df2\u7ecf\u63a5\u53d7e\u4fe1\u53f7\n                    e&lt;=1'b0;\n                    data &lt;={1'b1,r_data};\n                end\n                else\n                    data &lt;= {1'b0,r_data};\n            r_data &lt;= 8'b00000000;\n        end\n    end\nendmodule\n</code></pre>"},{"location":"LCDF_Report/Report/#12","title":"1.2 \u8f6c\u5316\u4e3a\u65b9\u5411\u4fe1\u606f\u4ee5\u53ca\u5b9e\u73b0\u952e\u76d8\u9632\u6296\u52a8","text":"<pre><code>//\u9632\u6296\u52a8\u4ee5\u53ca\u8f93\u51fa\u4e0a\u4e0b\u5de6\u53f3\nmodule ps2_dlc(\n    input clk,\n    input rst,\n    input ps2_clk,\n    input ps2_data,\n    output reg [1:0]dir //direction:00up;01down;10left;11right\n    );\n    wire [8:0]data;\n    reg [7:0]all; //[1:0]all \u4e3a11\u4ee3\u8868\u662fup [3:2]\u4ee3\u8868down.....\n    ps2 ps2(\n        .clk(clk),\n        .rst(rst),\n        .ps2_clk(ps2_clk),\n        .ps2_data(ps2_data),\n        .data(data)\n    );\n    initial begin\n        all&lt;=8'b00000000;\n        dir&lt;=2'b11;\n    end\n    always @(posedge clk or negedge rst)begin\n        if(!rst) begin\n            all&lt;=8'b00000000;\n        end\n        else begin\n            all[1:0]&lt;={all[0],data==9'h175}; //\u9632\u6296\u52a8\uff0c\u8fde\u7eed\u8f93\u5165\u4e24\u6b21\u624d\u53ef\u4ee5\u8bfb\u5165\u4fe1\u53f7\n            all[3:2]&lt;={all[2],data==9'h172};\n            all[5:4]&lt;={all[4],data==9'h16b};\n            all[7:6]&lt;={all[6],data==9'h174};\n        end\n    end\n    always @(posedge clk or negedge rst)begin\n        if(!rst)\n            dir &lt;=2'b11;\n        else begin\n            case(all)//\u6839\u636eall\u6570\u503c\u8f93\u51fa\u65b9\u5411\u4fe1\u606f\n            8'b00000011:dir&lt;=2'b00;\n            8'b00001100:dir&lt;=2'b01;\n            8'b00110000:dir&lt;=2'b10;\n            8'b11000000:dir&lt;=2'b11;\n        default:;\n        endcase\n        end\n    end\nendmodule\n</code></pre>"},{"location":"LCDF_Report/Report/#2vga","title":"2.VGA\u8bbe\u8ba1\u601d\u8def","text":""},{"location":"LCDF_Report/Report/#21-clk_gen","title":"2.1 clk_gen\u6a21\u5757","text":"<p>\u6b64\u6a21\u5757\u4ea7\u751f $25MHz$ \u7684 $clk$ \u4fe1\u53f7\uff0c\u7528\u4e8e $VGA$ \u7684\u8fd0\u4f5c\u3002</p> <pre><code>module clk_gen(\n    input clk, // 100 MHz\n    output vga_clk // 25 MHz\n    );\n\n    reg [1:0] clkdiv;\n    initial clkdiv = 2'b0;\n    always @(posedge clk) clkdiv = clkdiv + 2'b1;\n\n    assign vga_clk = clkdiv[1];\nendmodule\n</code></pre>"},{"location":"LCDF_Report/Report/#22-vga_ctrl","title":"2.2 vga_ctrl\u6a21\u5757","text":"<p>\u6b64\u6a21\u5757\u5df2\u63d0\u4f9b\u3002\u63a5\u6536\u50cf\u7d20\u70b9\u7684\u8272\u5f69\u4fe1\u606f\uff08$Din$\uff09\uff0c\u8f93\u51fa\u5f53\u524d\u50cf\u7d20\u70b9\u7684\u5750\u6807\uff08$row,col$\uff09\u548c $VGA$ \u6709\u5173\u7684\u53d8\u91cf\uff08$R,G,B,HS,VS$\uff09\u3002</p> <pre><code>module vga_ctrl(\n    input clk,                   // vga clk = 25 MHz\n    input rst,\n    input [11:0]Din,            // bbbb_gggg_rrrr, pixel\n    output reg [8:0]row,        // pixel ram row address, 480 (512) lines\n    output reg [9:0]col,        // pixel ram col address, 640 (1024) pixels\n    output reg rdn,         // read pixel RAM(active_low)\n    output reg [3:0]R, G, B,// red, green, blue colors\n    output reg HS, VS           // horizontal and vertical synchronization\n   );\n// h_count: VGA horizontal counter (0~799)\nreg [9:0] h_count; // VGA horizontal counter (0~799): pixels\ninitial h_count = 10'h0;\n    always @ (posedge clk) begin\n        if (rst)  h_count &lt;= 10'h0;\n        else if  (h_count == 10'd799)\n                     h_count &lt;= 10'h0;\n              else h_count &lt;= h_count + 10'h1;\n    end\n\n// v_count: VGA vertical counter (0~524)\nreg [9:0] v_count; // VGA vertical counter (0~524): pixel\ninitial v_count = 10'h0;\n    always @ (posedge clk or posedge rst) begin\n        if (rst)  v_count &lt;= 10'h0;\n        else if  (h_count == 10'd799) begin\n                    if (v_count == 10'd524) v_count &lt;= 10'h0;\n                    else v_count &lt;= v_count + 10'h1;\n        end\n    end\n\n\n// signals, will be latched for outputs\nwire    [9:0] row_addr = v_count - 10'd35;      // pixel ram row addr\nwire    [9:0] col_addr = h_count - 10'd143;     // pixel ram col addr\nwire            h_sync = (h_count &gt; 10'd95);        //   96 -&gt; 799\nwire            v_sync = (v_count &gt; 10'd1);     //    2 -&gt; 524\nwire            read   = (h_count &gt; 10'd142) &amp;&amp; //  143 -&gt; 782\n                            (h_count &lt; 10'd783) &amp;&amp;  //         640 pixels\n                            (v_count &gt; 10'd34)  &amp;&amp;  //   35 -&gt; 514\n                            (v_count &lt; 10'd525);        //         480 lines\n// vga signals\nalways @ (posedge clk) begin\n    row &lt;= row_addr[8:0];   // pixel ram row address\n    col &lt;= col_addr;            // pixel ram col address\n    rdn &lt;= ~read;               // read pixel (active low)\n    HS  &lt;= h_sync;              // horizontal synchronization\n    VS  &lt;= v_sync;              // vertical   synchronization\n    R   &lt;= rdn ? 4'h0 : Din[3:0];       // 3-bit red\n    G    &lt;= rdn ? 4'h0 : Din[7:4];      // 3-bit green\n    B    &lt;= rdn ? 4'h0 : Din[11:8]; // 2-bit blue\nend\n\nendmodule\n</code></pre>"},{"location":"LCDF_Report/Report/#23-vga_screen_pic","title":"2.3 vga_screen_pic\u6a21\u5757","text":"<p>\u6838\u5fc3\u6a21\u5757\uff0c\u8f93\u51fa\u5f53\u524d\u50cf\u7d20\u70b9\u7684\u8272\u5f69\u4fe1\u606f\u5e76\u63d0\u4f9b\u7ed9 $vga_ctrl$ \u6a21\u5757\u3002</p>"},{"location":"LCDF_Report/Report/#231-ip","title":"2.3.1 IP\u6838\u7684\u751f\u6210","text":""},{"location":"LCDF_Report/Report/#_5","title":"\u56fe\u7247\u5236\u4f5c","text":"<p>\u90e8\u5206\u56fe\u7247\u662f\u7531 $AI$ \u751f\u6210\u5e76\u4f7f\u7528 $PS$ \u8fdb\u884c\u4e00\u5b9a\u5904\u7406\u540e\u4ea7\u751f\u3002</p>"},{"location":"LCDF_Report/Report/#_6","title":"\u6e38\u620f\u5f00\u59cb\u753b\u9762","text":""},{"location":"LCDF_Report/Report/#_7","title":"\u6e38\u620f\u7ed3\u675f\u753b\u9762","text":""},{"location":"LCDF_Report/Report/#_8","title":"\u6e38\u620f\u4e2d\u753b\u9762","text":"<p>\u86c7\u7684\u8eab\u4f53\uff1a</p> <p></p> <p>\u86c7\u7684\u5934\u90e8\uff1a</p> <p></p> <p>\u6b7b\u4ea1\u683c\uff1a</p> <p></p> <p>\u5c0f\u98df\u7269\uff1a</p> <p></p> <p>\u4e2d\u98df\u7269\uff1a</p> <p></p> <p>\u5927\u98df\u7269\uff1a</p> <p></p>"},{"location":"LCDF_Report/Report/#_9","title":"\u56fe\u7247\u5904\u7406","text":"<p>\u6240\u6709\u56fe\u7247\u5bfc\u51fa\u4e3a24\u4f4d $.bmp$ \u6587\u4ef6\uff0c\u5e76\u4f7f\u7528 $Matlab$ \u5c06\u5176\u8f6c\u6362\u4e3a\u7b26\u5408\u683c\u5f0f\u7684 $.coe$ \u6587\u4ef6\u3002</p> <p>\u8f6c\u6362\u51fd\u6570\u5982\u4e0b\uff1a</p> <pre><code>function img2coe(path,name)\n    % \u5229\u7528imread\u51fd\u6570\u628a\u56fe\u7247\u8f6c\u5316\u4e3a\u4e00\u4e2a\u4e09\u7ef4\u77e9\u9635\n    image_array = imread(path);\n\n    % \u5229\u7528size\u51fd\u6570\u628a\u56fe\u7247\u77e9\u9635\u7684\u4e09\u4e2a\u7ef4\u5ea6\u5927\u5c0f\u8ba1\u7b97\u51fa\u6765\n    % \u7b2c\u4e00\u7ef4\u4e3a\u56fe\u7247\u7684\u9ad8\u5ea6\uff0c\u7b2c\u4e8c\u7ef4\u4e3a\u56fe\u7247\u7684\u5bbd\u5ea6\uff0c\u7b2c\u4e09\u7ef4\u4e3a\u56fe\u7247\u7684RGB\u5206\u91cf\n    [height,width,z]=size(image_array);   \n\n    red   = image_array(:,:,1); % \u63d0\u53d6\u7ea2\u8272\u5206\u91cf\uff0c\u6570\u636e\u7c7b\u578b\u4e3auint8\n    green = image_array(:,:,2); % \u63d0\u53d6\u7eff\u8272\u5206\u91cf\uff0c\u6570\u636e\u7c7b\u578b\u4e3auint8\n    blue  = image_array(:,:,3); % \u63d0\u53d6\u84dd\u8272\u5206\u91cf\uff0c\u6570\u636e\u7c7b\u578b\u4e3auint8\n\n    % \u628a\u4e0a\u9762\u5f97\u5230\u4e86\u5404\u4e2a\u5206\u91cf\u91cd\u7ec4\u6210\u4e00\u4e2a1\u7ef4\u77e9\u9635\uff0c\u7531\u4e8ereshape\u51fd\u6570\u91cd\u7ec4\u77e9\u9635\u7684\n    % \u65f6\u5019\u662f\u6309\u7167\u5217\u8fdb\u884c\u91cd\u7ec4\u7684\uff0c\u6240\u4ee5\u91cd\u7ec4\u524d\u9700\u8981\u5148\u628a\u5404\u4e2a\u5206\u91cf\u77e9\u9635\u8fdb\u884c\u8f6c\u7f6e\u4ee5\u540e\u518d\u91cd\u7ec4\n    % \u5229\u7528reshape\u91cd\u7ec4\u5b8c\u6bd5\u4ee5\u540e\uff0c\u7531\u4e8e\u540e\u9762\u9700\u8981\u5bf9\u6570\u636e\u62fc\u63a5\uff0c\u6240\u4ee5\u4e3a\u4e86\u907f\u514d\u6ea2\u51fa\n    % \u8fd9\u91cc\u628auint8\u7c7b\u578b\u7684\u6570\u636e\u6269\u5927\u4e3auint32\u7c7b\u578b\n    r = uint32(reshape(red'   , 1 ,height*width));\n    g = uint32(reshape(green' , 1 ,height*width));\n    b = uint32(reshape(blue'  , 1 ,height*width));\n\n    % \u521d\u59cb\u5316\u8981\u5199\u5165.coe\u6587\u4ef6\u4e2d\u7684RGB\u989c\u8272\u77e9\u9635\n    rgb=zeros(1,height*width);\n\n    % \u56e0\u4e3a\u5bfc\u5165\u7684\u56fe\u7247\u662f24-bit\u771f\u5f69\u8272\u56fe\u7247\uff0c\u6bcf\u4e2a\u50cf\u7d20\u5360\u752824-bit\uff0c\u5176\u4e2dRGB\u5206\u522b\u5360\u75288-bit\n    % \u800c\u6211\u8fd9\u91cc\u9700\u8981\u7684\u662f12-bit\uff0c\u5176\u4e2dR\u4e3a4-bit\uff0cG\u4e3a4-bit\uff0cB\u4e3a4-bit\uff0c\u6240\u4ee5\u9700\u8981\u5728\u8fd9\u91cc\u5bf924-bit\u7684\u6570\u636e\u8fdb\u884c\u91cd\u7ec4\u4e0e\u62fc\u63a5\n    % bitshift()\u51fd\u6570\u7684\u4f5c\u7528\u662f\u5bf9\u6570\u636e\u8fdb\u884c\u79fb\u4f4d\u64cd\u4f5c\uff0c\u5176\u4e2d\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8981\u8fdb\u884c\u79fb\u4f4d\u7684\u6570\u636e\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u8d1f\u6570\u8868\u793a\u5411\u53f3\u79fb\uff0c\u4e3a\n    % \u6b63\u6570\u8868\u793a\u5411\u5de6\u79fb\uff0c\u66f4\u8be6\u7ec6\u7684\u7528\u6cd5\u76f4\u63a5\u5728Matlab\u547d\u4ee4\u7a97\u53e3\u8f93\u5165 doc bitshift \u8fdb\u884c\u67e5\u770b\n    % \u6240\u4ee5\u8fd9\u91cc\u5bf9\u7ea2\u8272\u5206\u91cf\u5148\u53f3\u79fb4\u4f4d\u53d6\u51fa\u9ad84\u4f4d\uff0c\u7136\u540e\u5de6\u79fb8\u4f4d\u4f5c\u4e3aROM\u4e2dRGB\u6570\u636e\u7684\u7b2c11-bit\u5230\u7b2c8-bit\n    % \u5bf9\u7eff\u8272\u5206\u91cf\u5148\u53f3\u79fb4\u4f4d\u53d6\u51fa\u9ad84\u4f4d\uff0c\u7136\u540e\u5de6\u79fb4\u4f4d\u4f5c\u4e3aROM\u4e2dRGB\u6570\u636e\u7684\u7b2c7-bit\u5230\u7b2c4-bit\n    % \u5bf9\u84dd\u8272\u5206\u91cf\u5148\u53f3\u79fb4\u4f4d\u53d6\u51fa\u9ad84\u4f4d\uff0c\u7136\u540e\u5de6\u79fb0\u4f4d\u4f5c\u4e3aROM\u4e2dRGB\u6570\u636e\u7684\u7b2c3-bit\u5230\u7b2c0-bit\n    for i = 1:height*width\n        rgb(i) = bitshift(bitshift(r(i),-4),8) + bitshift(bitshift(g(i),-4),4) + bitshift(bitshift(b(i),-4),0);\n    end\n\n    fid = fopen( name , 'w+' );\n\n    % .coe\u6587\u4ef6\u7684\u6700\u524d\u9762\u4e00\u884c\u5fc5\u987b\u4e3a\u8fd9\u4e2a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d16\u8868\u793a16\u8fdb\u5236\n    fprintf( fid, 'memory_initialization_radix=16;\\n');\n\n    % .coe\u6587\u4ef6\u7684\u7b2c\u4e8c\u884c\u5fc5\u987b\u4e3a\u8fd9\u4e2a\u5b57\u7b26\u4e32\n    fprintf( fid, 'memory_initialization_vector =\\n');\n\n    % \u628argb\u6570\u636e\u7684\u524d height*width-1  \u4e2a\u6570\u636e\u5199\u5165.coe\u6587\u4ef6\u4e2d\uff0c\u6bcf\u4e2a\u6570\u636e\u4e4b\u95f4\u7528\u9017\u53f7\u9694\u5f00\n    fprintf( fid, '%x,\\n',rgb(1:end-1));\n\n    % \u628argb\u6570\u636e\u7684\u6700\u540e\u4e00\u4e2a\u6570\u636e\u5199\u5165.coe\u6587\u4ef6\u4e2d\uff0c\u5e76\u7528\u5206\u53f7\u7ed3\u5c3e\n    fprintf( fid, '%x;',rgb(end));\n\n    fclose( fid ); % \u5173\u95ed\u6587\u4ef6\u6307\u9488\nend\n</code></pre> <p>\u751f\u6210\u540e\u7684 $.coe$ \u6587\u4ef6\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>memory_initialization_radix=16; // \u8868\u793a\u6bcf\u4e00\u884c\u7684\u6570\u636e\u662f16\u8fdb\u5236\u7684\nmemory_initialization_vector =\n5c5, // \u6bcf\u4e00\u884c\u90fd\u662f\u4e00\u4e2a\u50cf\u7d20\u70b9\u7684\u8272\u5f69\u4fe1\u606f\uff0cR\uff0cG\uff0cB\u4e09\u4e2a\u901a\u9053\u54044bit\n5c5,\n5c5,\n...\n5c5,\n5c5,\n5c5;\n</code></pre>"},{"location":"LCDF_Report/Report/#ip","title":"\u751f\u6210IP\u6838","text":"<p>\u5229\u7528 $vivado$ \u751f\u6210IP\u6838\uff0c\u5bfc\u5165 $.coe$ \u6587\u4ef6\uff0c\u9009\u62e9\u751f\u6210 $ROM$ \u3002</p>"},{"location":"LCDF_Report/Report/#ip_1","title":"IP\u6838\u7684\u8c03\u7528","text":"<p>\u6a21\u5757\u63a5\u53e3\u4ee5\u53ca\u53d8\u91cf\u5b9a\u4e49\u4e0e\u521d\u59cb\u5316\uff1a</p> <p>\u9700\u8981\u8bf4\u660e\u7684\u662f\uff0c\u8f93\u5165\u53d8\u91cf $state$ \u7531 $run_module$ \u6a21\u5757\u6839\u636e\u5f53\u524d\u50cf\u7d20\u70b9\u5750\u6807\u5f97\u5230\u5e76\u63d0\u4f9b\u3002</p> <pre><code>module vga_screen_pic(\n    input [9:0] pix_x, // \u50cf\u7d20\u70b9 x \u5750\u6807\n    input [8:0] pix_y, // \u50cf\u7d20\u70b9 y \u5750\u6807\n    input clk, // 100 MHz\n    input [1:0] game_state, // \u6e38\u620f\u72b6\u6001\n    input [2:0] state, // \u5f53\u524d\u5355\u5143\u683c\u7684\u72b6\u6001\n    // 0 \u80cc\u666f 1 \u86c7\u5934 2 \u86c7\u8eab 3 \u5c0f\u98df\u7269 4 \u4e2d\u98df\u7269 5 \u5927\u98df\u7269 6 \u6b7b\u4ea1\u683c\n    output reg [11:0] pix_data_out // \u8272\u5f69\u4fe1\u606f\n    );\n\n    parameter H_PIC = 10'd16, // \u5c0f\u56fe\u7247\u9ad8\u5ea6\n            SCREEN_W_PIC = 19'd640; // VGA \u5bbd\u5ea6\n\n    parameter BLACK = 12'h000, // \u80cc\u666f\n            GREEN = 12'h0f0, // \u86c7\u5934\uff08\u6682\u65f6\u66ff\u4ee3\uff09\n            YELLOW = 12'hff0, // \u86c7\u8eab\uff08\u6682\u65f6\u66ff\u4ee3\uff09\n            RED = 12'hf00, // \u6b7b\u4ea1\u683c\uff08\u6682\u65f6\u66ff\u4ee3\uff09\n            BLUE = 12'h00f; // \u98df\u7269\uff08\u6682\u65f6\u66ff\u4ee3\uff09\n\n    wire [7:0] pic_romaddr0; // \u5c0f\u56fe\u7247\u7684 ROM \u5730\u5740\n    wire [18:0] pic_romaddr1; // \u5927\u56fe\u7247\u7684 ROM \u5730\u5740\n    wire [11:0] snake_head_data, snake_body_data, \n                food_s_data, food_m_data, food_l_data,\n                dead_block_data, game_start_data, game_over_data; // \u5404\u4e2a ROM \u91cc\u7684\u6570\u636e\u4fe1\u606f\n</code></pre> <p>\u5b9a\u4e49\u4e86\u4e24\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u8ba1\u7b97\u5f53\u524d\u50cf\u7d20\u70b9\u6240\u5728\u7684\u5355\u5143\u683c\u7684\u5de6\u4e0a\u89d2\u5750\u6807\uff0c\u4fbf\u4e8e\u8ba1\u7b97\u76f8\u5e94\u7684\u5730\u5740\u4fe1\u606f\u4ece\u800c\u83b7\u5f97\u76f8\u5e94\u7684\u8272\u5f69\u4fe1\u606f\u3002</p> <pre><code>function [9:0] cell_x; // \u8ba1\u7b97\u50cf\u7d20\u70b9\u5bf9\u5e94\u5355\u5143\u683c\u7684\u5de6\u4e0a\u89d2 x \u5750\u6807\n    input [9:0] pix_x;\n    begin\n        cell_x = (pix_x &gt;&gt; 4) * H_PIC; // \u9664\u4ee5 16 \u5e76\u4e58\u4ee5\u56fe\u7247\u7684\u9ad8\u5ea6\n    end\nendfunction\n\nfunction [8:0] cell_y; // \u8ba1\u7b97\u50cf\u7d20\u70b9\u5bf9\u5e94\u5355\u5143\u683c\u7684\u5de6\u4e0a\u89d2 y \u5750\u6807\n    input [8:0] pix_y;\n    begin\n        cell_y = (pix_y &gt;&gt; 4) * H_PIC;\n    end\nendfunction\n</code></pre> <p>\u8ba1\u7b97\u4e24\u4e2a $ROM$ \u5730\u5740\u53d8\u91cf\u7684\u503c\uff1a</p> <pre><code>assign pic_romaddr0 = (pix_x - cell_x(pix_x)) + (pix_y - cell_y(pix_y)) * H_PIC;\nassign pic_romaddr1 = pix_x + pix_y * SCREEN_W_PIC; // \u5927\u56fe\u7247\u7684\u5bbd\u5ea6\u548c VGA \u7684\u5bbd\u5ea6\u76f8\u540c\n</code></pre> <p>IP\u6838\u7684\u8c03\u7528\uff1a</p> <pre><code>snake_head snake_head0(\n    .addra(pic_romaddr0),\n    .clka(clk),\n    .douta(snake_head_data)\n);\n\nsnake_body snake_body0(\n    .addra(pic_romaddr0),\n    .clka(clk),\n    .douta(snake_body_data)\n);\n\nfood_s food_s0(\n    .addra(pic_romaddr0),\n    .clka(clk),\n    .douta(food_s_data)\n);\n\nfood_m food_m0(\n    .addra(pic_romaddr0),\n    .clka(clk),\n    .douta(food_m_data)\n);\n\nfood_l food_l0(\n    .addra(pic_romaddr0),\n    .clka(clk),\n    .douta(food_l_data)\n);\n\ndead_block dead_block0(\n    .addra(pic_romaddr0),\n    .clka(clk),\n    .douta(dead_block_data)\n);\n\ngame_start game_start0(\n    .addra(pic_romaddr1),\n    .clka(clk),\n    .douta(game_start_data)\n);\n\ngame_over game_over0(\n    .addra(pic_romaddr1),\n    .clka(clk),\n    .douta(game_over_data)\n);\n</code></pre> <p>\u8ba1\u7b97\u6b63\u786e\u7684\u8272\u5f69\u4fe1\u606f\uff1a</p> <pre><code>always @(posedge clk) begin\n    case (game_state) // \u5224\u65ad\u6e38\u620f\u72b6\u6001\n        2'd0: pix_data_out &lt;= game_start_data; // 0 \u5373\u6e38\u620f\u5f85\u5f00\u59cb\uff0c\u8272\u5f69\u4fe1\u606f\u4e3a game_start \u56fe\u7247\n        2'd1: begin // 1 \u5373\u6e38\u620f\u8fdb\u884c\u4e2d\n            case (state) // \u5224\u65ad\u5355\u5143\u683c\u7684\u72b6\u6001\n                3'd0: pix_data_out &lt;= BLACK; // 0 \u5373\u80cc\u666f\u683c\uff0c\u4e3a\u9ed1\u8272\n                3'd1: pix_data_out &lt;= snake_head_data; // 1 \u5373\u86c7\u5934\u90e8\n                3'd2: pix_data_out &lt;= snake_body_data; // 2 \u5373\u86c7\u8eab\u90e8\n                3'd3: pix_data_out &lt;= food_s_data; // 3 \u5373\u5c0f\u98df\u7269\n                3'd4: pix_data_out &lt;= food_m_data; // 4 \u5373\u4e2d\u98df\u7269\n                3'd5: pix_data_out &lt;= food_l_data; // 5 \u5373\u5927\u98df\u7269\n                3'd6: pix_data_out &lt;= dead_block_data; // 6 \u5373\u6b7b\u4ea1\u683c\n                default: pix_data_out &lt;= BLACK; // \u5176\u4ed6\u72b6\u6001\u8bbe\u7f6e\u4e3a\u9ed1\u8272\n            endcase\n        end\n        2'd2: pix_data_out &lt;= game_over_data; // 2 \u5373\u6e38\u620f\u7ed3\u675f \n        default: pix_data_out &lt;= BLACK; // \u5176\u4ed6\u72b6\u6001\u8bbe\u7f6e\u4e3a\u9ed1\u8272\n    endcase\nend\n</code></pre>"},{"location":"LCDF_Report/Report/#3","title":"3.\u8702\u9e23\u5668\u8bbe\u8ba1\u601d\u8def","text":""},{"location":"LCDF_Report/Report/#_10","title":"\u8702\u9e23\u5668\u539f\u7406","text":"<p>\u6211\u4eec\u677f\u5b50\u7684\u8702\u9e23\u5668\u662f\u65e0\u6e90\u8702\u9e23\u5668\uff0c\u56e0\u5176\u5185\u90e8\u4e0d\u5e26\u9707\u8361\u6e90\uff0c\u6240\u4ee5\u9700\u8981PWM\u65b9\u6ce2\u624d\u80fd\u9a71\u52a8\u5176\u53d1\u58f0\u3002</p> <p>PWM\u65b9\u6ce2\u7684\u9891\u7387\u51b3\u5b9a\u58f0\u97f3\u7684\u97f3\u8c03\uff0cPWM\u65b9\u6ce2\u7684\u5360\u7a7a\u6bd4\u51b3\u5b9a\u58f0\u97f3\u7684\u54cd\u5ea6\u3002\u6240\u4ee5\u53ea\u9700\u4ea7\u751f\u4e0d\u540c\u9891\u7387\u548c\u5360\u7a7a\u6bd4\u7684PWM\u65b9\u6ce2\u53bb\u9a71\u52a8\u65e0\u6e90\u8702\u9e23\u5668\uff0c\u5c31\u80fd\u8ba9\u65e0\u6e90\u8702\u9e23\u5668\u53d1\u51fa\u60f3\u8981\u7684\u58f0\u97f3\u5e8f\u5217\u4e86\u3002</p>"},{"location":"LCDF_Report/Report/#_11","title":"\u5b9e\u73b0\u6b65\u9aa4","text":""},{"location":"LCDF_Report/Report/#_12","title":"\u6e38\u620f\u5f00\u59cb\u97f3\u4e50","text":"<p>\u9009\u62e9\u5408\u9002\u7684\u97f3\u4e50\uff0c\u6252\u8c31\uff1a</p> <p></p> <p>\u5b9e\u73b0\u539f\u7406\u6ce2\u5f62\u56fe\u5982\u4e0b\uff1a</p> <p></p> <p>\u6211\u4eec\u7684 $clk$ \u9891\u7387\u4e3a $100MHz$ \uff0c\u5468\u671f\u4e3a $10ns$ \uff0c\u8be5\u97f3\u4e50\u7684bpm\u4e3a120\uff0c\u6bcf\u8fc7\u534a\u62cd\uff088\u4e2a16\u5206\u97f3\u7b26\uff09\uff0c\u65f6\u95f4\u8fc7\u53bb1s\u3002\u4ee5\u4e00\u4e2a16\u5206\u97f3\u7b26\u7684\u957f\u5ea6\u4e3a\u5355\u4f4d\u65f6\u95f4\uff0c\u5373 $\\frac{1}{8}=0.125s=125ms$ \uff0c\u5305\u62ec\u4e86 $\\frac{0.125}{10\\times10^{-9}}=12500000$ \u4e2a $clk$ \u5468\u671f\u3002\u4ee5 $A4$ \u97f3\u4e3a\u4f8b\uff0c\u8be5\u97f3\u8c03\u7684\u9891\u7387\u4e3a $440Hz$ \uff0c\u5176\u97f3\u6ce2\u5468\u671f\u4e3a $\\frac{1}{440} = 2272727ns$ \uff0c\u5305\u62ec\u4e86 $\\frac{2272727}{10}=2272723$ \u4e2a $clk$ \u5468\u671f\u3002\u5176\u4ed6\u97f3\u540c\u7406\u3002</p> <p>\u63a5\u4e0b\u6765\u5c06\u7ed3\u5408\u5b9e\u73b0\u539f\u7406\u6ce2\u5f62\u56fe\u548c\u4ee3\u7801\u8fdb\u884c\u8be6\u7ec6\u89e3\u91ca\u3002</p> <p>\u6a21\u5757\u63a5\u53e3\u548c\u53d8\u91cf\u7684\u5b9a\u4e49\u548c\u521d\u59cb\u5316\uff1a</p> <pre><code>module beep_gamestart(\n    input clk,\n    input [1:0] game_state, // \u6e38\u620f\u72b6\u6001\u53d8\u91cf\n    output reg beep\n    );\n\n    reg rst;\n    reg [23:0] cnt; // \u7528\u4e8e\u8ba1\u6570\u7684\u4fe1\u53f7\n    reg [19:0] freq_cnt; // \u97f3\u8c03\u9891\u7387\u8ba1\u6570\n    reg [5:0] cnt_125ms; // 125ms\u4e2a\u6570\u8ba1\u6570\n    reg [19:0] freq_data; // \u97f3\u8c03\u9891\u7387\n\n    wire [19:0] duty_data; // \u5360\u7a7a\u6bd4\n\n    initial begin // \u521d\u59cb\u5316\u6240\u6709 reg \u4fe1\u53f7\n        rst = 1'b0;\n        beep = 1'b0;\n        cnt = 24'b0;\n        freq_cnt = 20'b0;\n        cnt_125ms = 6'b0;\n        freq_data = 20'b0;\n    end\n\n    parameter TIME_125ms = 24'd12499999, // 125 ms\n                A4 = 19'd227272, // 440 Hz\n                D5 = 19'd170357, // 587\n                C5 = 19'd191204, // 523\n                B4 = 19'd202428, // 494\n                FS_4 = 19'd270269, // 370\n                G4 = 19'd255101, // 392\n                D4 = 19'd378787, // 264\n                E4 = 19'd303030, // 330\n                F4 = 19'd286532, // 349\n                C4 = 19'd381678; // 262\n</code></pre> <p>\u6211\u4eec\u9009\u62e9\u5360\u7a7a\u6bd4\u4e3a $50\\%$ \u7684PWM\u65b9\u6ce2\uff1a</p> <pre><code>assign duty_data = freq_data &gt;&gt; 1'b1;\n</code></pre> <p>\u6839\u636e\u6e38\u620f\u72b6\u6001\u4fe1\u53f7\u8c03\u6574 $rst$ \u4fe1\u53f7\uff1a</p> <pre><code>always @(game_state) begin\n    if (game_state == 2'b00) begin // \u6e38\u620f\u5f00\u59cb\u9875\u9762\n        rst = 1'b0; // rst \u4e3a 0 \u65f6\uff0c\u58f0\u6ce2\u6b63\u5e38\u4ea7\u751f\n    end else begin\n        rst = 1'b1; // rst \u4e3a 1 \u65f6\uff0c\u58f0\u6ce2\u4e0d\u4ea7\u751f\n    end\nend\n</code></pre> <p>$cnt$ \u7684\u8c03\u6574\uff1a</p> <pre><code>always @(posedge clk or posedge rst) begin\n    if (rst) begin\n        cnt &lt;= 24'd0;\n    end else if (cnt == TIME_125ms) begin // \u6bcf\u5f53 cnt \u8fbe\u5230 TIME_125ms \u5373\u6bcf\u8fc7 1 \u4e2a\u65f6\u95f4\u5355\u4f4d\uff0c\u8be5\u53d8\u91cf\u91cd\u7f6e\u4e3a 0 \u91cd\u65b0\u5f00\u59cb\u8ba1\u6570\n        cnt &lt;= 24'd0;\n    end else begin\n        cnt &lt;= cnt + 1'b1;\n    end\nend\n</code></pre> <p></p> <p>\u6ce8\uff1atestbench\u6587\u4ef6\u4e2d\u4fee\u6539\u4e86\u67d0\u4e9b\u53c2\u6570\u7684\u503c\uff0c\u4ee5\u6b64\u6765\u51cf\u5c11\u4eff\u771f\u65f6\u95f4</p> <p>$cnt_125ms$ \u7684\u8c03\u6574\uff1a</p> <pre><code>always @(posedge clk or posedge rst) begin\n    if (rst) begin\n        cnt_125ms &lt;= 6'd0;\n    end else if (cnt == TIME_125ms &amp;&amp; cnt_125ms == 7'd64) begin // \u97f3\u4e50\u64ad\u653e\u7ed3\u675f\u65f6\uff0c\u91cd\u7f6e\u4e3a 0 \uff0c\u5b9e\u73b0\u5faa\u73af\u64ad\u653e\u97f3\u4e50\n        cnt_125ms &lt;= 6'd0;\n    end else if (cnt == TIME_125ms) begin // \u6bcf\u8fc7 1 \u4e2a\u65f6\u95f4\u5355\u4f4d\uff0c\u53d8\u91cf\u503c\u52a0 1\n        cnt_125ms &lt;= cnt_125ms + 1'b1;\n    end\nend\n</code></pre> <p></p> <p>$freq_cnt$ \u7684\u8c03\u6574\uff1a</p> <pre><code>always @(posedge clk or posedge rst) begin\n    if (rst) begin\n        freq_cnt &lt;= 19'd0;\n    end else if (freq_cnt &gt;= freq_data || cnt == TIME_125ms) begin // \u5f53\u9891\u7387\u8ba1\u6570\u4fe1\u53f7\u5927\u4e8e\u6b64\u65f6\u7684\u58f0\u97f3\u9891\u7387\uff0c\u6216\u6bcf\u5f53\u8fc7 1 \u4e2a\u65f6\u95f4\u5355\u4f4d\u65f6\uff0c\u8be5\u503c\u91cd\u7f6e\u4e3a 0 \n        freq_cnt &lt;= 19'd0;\n    end else begin\n        freq_cnt &lt;= freq_cnt + 1'b1;\n    end\nend\n</code></pre> <p></p> <p>$beep$ \u7684\u8c03\u6574\uff1a</p> <pre><code>always @(posedge clk or posedge rst) begin\n    if (rst) begin\n        beep &lt;= 1'b0;\n    end else if (freq_cnt &gt; duty_data) begin // \u5f53\u9891\u7387\u8ba1\u6570\u4fe1\u53f7\u5927\u4e8e\u5360\u7a7a\u6bd4\u65f6\uff0c\u4f7f PWM \u4e3a 1\uff0c\u5b9e\u73b0 50% \u7684\u5360\u7a7a\u6bd4\n        beep &lt;= 1'b1;\n    end else begin\n        beep &lt;= 1'b0;\n    end\nend\n</code></pre> <p></p> <p>$freq_data$ \u7684\u8c03\u6574\uff1a</p> <pre><code>always @(posedge clk or posedge rst) begin\n    if (rst) begin\n        freq_data &lt;= 19'd0;\n    end else begin\n        case (cnt_125ms) // \u6839\u636e\u4e0d\u540c\u7684\u65f6\u95f4\u6bb5\uff0c\u4e3a\u8be5\u53d8\u91cf\u8d4b\u503c\u4e0d\u540c\u7684\u9891\u7387\u503c\n            7'd0: freq_data &lt;= A4;\n            7'd1: freq_data &lt;= A4;\n            7'd2: freq_data &lt;= A4;\n            7'd3: freq_data &lt;= A4;\n            7'd4: freq_data &lt;= D5;\n            7'd5: freq_data &lt;= D5;\n            7'd6: freq_data &lt;= A4;\n            7'd7: freq_data &lt;= A4;\n            7'd8: freq_data &lt;= C5;\n            7'd9: freq_data &lt;= C5;\n            7'd10: freq_data &lt;= C5;\n            7'd11: freq_data &lt;= C5;\n            7'd12: freq_data &lt;= B4;\n            7'd13: freq_data &lt;= A4;\n            7'd14: freq_data &lt;= FS_4;\n            7'd15: freq_data &lt;= G4;\n            7'd16: freq_data &lt;= A4;\n            7'd17: freq_data &lt;= A4;\n            7'd18: freq_data &lt;= A4;\n            7'd19: freq_data &lt;= A4;\n            7'd20: freq_data &lt;= A4;\n            7'd21: freq_data &lt;= A4;\n            7'd22: freq_data &lt;= A4;\n            7'd23: freq_data &lt;= A4;\n            7'd24: freq_data &lt;= D4;\n            7'd25: freq_data &lt;= D4;\n            7'd26: freq_data &lt;= D4;\n            7'd27: freq_data &lt;= D4;\n            7'd28: freq_data &lt;= E4;\n            7'd29: freq_data &lt;= E4;\n            7'd30: freq_data &lt;= E4;\n            7'd31: freq_data &lt;= E4;\n            7'd32: freq_data &lt;= F4;\n            7'd33: freq_data &lt;= F4;\n            7'd34: freq_data &lt;= F4;\n            7'd35: freq_data &lt;= F4;\n            7'd36: freq_data &lt;= F4;\n            7'd37: freq_data &lt;= F4;\n            7'd38: freq_data &lt;= F4;\n            7'd39: freq_data &lt;= F4;\n            7'd40: freq_data &lt;= D4;\n            7'd41: freq_data &lt;= D4;\n            7'd42: freq_data &lt;= D4;\n            7'd43: freq_data &lt;= D4;\n            7'd44: freq_data &lt;= F4;\n            7'd45: freq_data &lt;= G4;\n            7'd46: freq_data &lt;= F4;\n            7'd47: freq_data &lt;= G4;\n            7'd48: freq_data &lt;= E4;\n            7'd49: freq_data &lt;= E4;\n            7'd50: freq_data &lt;= E4;\n            7'd51: freq_data &lt;= E4;\n            7'd52: freq_data &lt;= C4;\n            7'd53: freq_data &lt;= C4;\n            7'd54: freq_data &lt;= C4;\n            7'd55: freq_data &lt;= C4;\n            7'd56: freq_data &lt;= D4;\n            7'd57: freq_data &lt;= D4;\n            7'd58: freq_data &lt;= D4;\n            7'd59: freq_data &lt;= D4;\n            7'd60: freq_data &lt;= D4;\n            7'd61: freq_data &lt;= D4;\n            7'd62: freq_data &lt;= D4;\n            7'd63: freq_data &lt;= D4;\n            default: freq_data &lt;= 19'd0;\n        endcase\n    end\nend\n</code></pre> <p></p>"},{"location":"LCDF_Report/Report/#_13","title":"\u6e38\u620f\u7ed3\u675f\u97f3\u4e50","text":"<p>\u548c\u6e38\u620f\u5f00\u59cb\u97f3\u4e50\u7684\u5b9e\u73b0\u76f8\u540c\uff0c\u4e0d\u540c\u7684\u70b9\u5728\u4e8e\u6e38\u620f\u7ed3\u675f\u97f3\u4e50\u53ea\u9700\u8981\u64ad\u653e\u4e00\u6b21\u3002\u53ef\u4ee5\u8c03\u6574 $cnt_125ms$ \u5b9e\u73b0\u64ad\u653e\u4e00\u6b21\u3002</p> <pre><code>always @(posedge clk or posedge rst) begin\n    if (rst) begin\n        cnt_125ms &lt;= 6'd0;\n    end else if (cnt == TIME_125ms &amp;&amp; cnt_125ms &lt;= 6'd33) begin\n        cnt_125ms &lt;= cnt_125ms + 1'b1;\n    end // \u5f53\u97f3\u4e50\u64ad\u653e\u7ed3\u675f\u540e\uff0c\u4e0d\u518d\u91cd\u7f6e\u4e3a 0\uff0c\u5b9e\u73b0\u53ea\u64ad\u653e\u4e00\u6b21\nend\n</code></pre> <pre><code>always @(posedge clk or posedge rst) begin\n    if (rst) begin\n        freq_data &lt;= 18'd0;\n    end else begin\n        case (cnt_125ms)\n            5'd0: freq_data &lt;= 18'd0;\n            5'd1: freq_data &lt;= 18'd0;\n            5'd2: freq_data &lt;= 18'd0;\n            5'd3: freq_data &lt;= 18'd0;\n            5'd4: freq_data &lt;= AS_4;\n            5'd5: freq_data &lt;= AS_4;\n            5'd6: freq_data &lt;= AS_4;\n            5'd7: freq_data &lt;= AS_4;\n            5'd10: freq_data &lt;= A4;\n            5'd11: freq_data &lt;= A4;\n            5'd12: freq_data &lt;= A4;\n            5'd13: freq_data &lt;= A4;\n            5'd16: freq_data &lt;= GS_4;\n            5'd17: freq_data &lt;= GS_4;\n            5'd18: freq_data &lt;= GS_4;\n            5'd22: freq_data &lt;= G4;\n            5'd23: freq_data &lt;= G4;\n            5'd24: freq_data &lt;= G4;\n            5'd25: freq_data &lt;= G4;\n            5'd26: freq_data &lt;= G4;\n            5'd27: freq_data &lt;= G4;\n            5'd28: freq_data &lt;= G4;\n            5'd29: freq_data &lt;= G4;\n            5'd30: freq_data &lt;= G4;\n            5'd31: freq_data &lt;= G4;\n            5'd32: freq_data &lt;= G4;\n            5'd33: freq_data &lt;= G4;\n            default: freq_data &lt;= 18'd0;\n        endcase\n    end\nend\n</code></pre> <p></p>"},{"location":"LCDF_Report/Report/#top_beep","title":"top_beep \u6a21\u5757","text":"<pre><code>module top_beep(\n    input clk,\n    input [1:0] game_state,\n    output reg beep\n    );\n\n    wire beep_start;\n    wire beep_over;\n\n    initial begin\n        beep = 1'b0;\n    end\n\n    beep_gamestart bp_gs(.clk(clk), .game_state(game_state), .beep(beep_start)); // \u8c03\u7528\u4e24\u4e2a\u6a21\u5757\n    beep_gameover bp_go(.clk(clk), .game_state(game_state), .beep(beep_over));\n\n    always @(posedge clk) begin\n        if (game_state == 2'b00) begin\n            beep = beep_start; // \u6e38\u620f\u5f85\u5f00\u59cb\u72b6\u6001\uff0cbeep \u4e3a game_start \n        end else if (game_state == 2'b10) begin\n            beep = beep_over; // \u6e38\u620f\u7ed3\u675f\u72b6\u6001\uff0cbeep \u4e3a game_over\n        end\n    end\nendmodule\n</code></pre>"},{"location":"LCDF_Report/Report/#4","title":"4.\u72b6\u6001\u673a\u8bbe\u8ba1\u601d\u8def","text":"<p><pre><code>module gaming (\n    input rst,\n    input gameover,\n    input start_button,\n    output reg [1:0] game_state\n);\ninitial begin\n    game_state = 2'd0; //\u521d\u59cb\u5316\u4e3a\u5f00\u59cb\u754c\u9762\nend\n\n\nalways @(negedge rst or posedge gameover or posedge start_button) begin\n    if(rst == 1'b0) begin\n        game_state &lt;= 2'd0;\n\n    end\n    else if(start_button == 2'b1) begin\n        game_state &lt;= 2'd1;\n    end\n    else if(gameover == 2'b1) begin\n        game_state &lt;= 2'd2;\n    end\n\nend\nendmodule\n</code></pre> \u8bbe\u5b9a\u6e38\u620f\u67093\u4e2a\u72b6\u6001\u5206\u522b\u662f\uff1a <code>2'b00</code>:\u5f00\u59cb\u754c\u9762\u72b6\u6001\uff1b<code>2'b01</code>:\u6e38\u73a9\u4e2d\uff1b<code>2\u2018b10</code>:\u6e38\u620f\u7ed3\u675f \u6e38\u620f\u521d\u59cb\u5316\u4e3a\u5f00\u59cb\u754c\u9762\u72b6\u6001\uff0c\u5728\u6e38\u620f\u5f00\u59cb\u6309\u94ae<code>start_button</code>\u7f6e1\u65f6\uff0c\u4f1a\u5207\u6362\u4e3a\u6e38\u73a9\u4e2d\u72b6\u6001\uff1b\u5f53\u6e38\u620f\u7ed3\u675f\uff0c\u4ece\u8fd0\u52a8\u6a21\u5757\u4e2d\u4f20\u5165\u7684<code>gameover</code>\u4fe1\u53f7\u7f6e1\uff0c\u6e38\u620f\u8fdb\u5165\u7ed3\u675f\u72b6\u6001\uff1b\u5f53\u518d\u6309\u4e0b<code>start_button</code>\u65f6\u5373\u53ef\u6062\u590d\u6e38\u620f\u72b6\u6001\u4e3a\u6e38\u73a9\u4e2d\uff0c\u7ee7\u7eed\u6e38\u620f\u3002</p>"},{"location":"LCDF_Report/Report/#5","title":"5.\u8fd0\u52a8\u6a21\u5757\u8bbe\u8ba1\u601d\u8def","text":""},{"location":"LCDF_Report/Report/#51-io","title":"5.1 IO\u4fe1\u53f7\u4ee3\u7801","text":"<p><pre><code>module run_module(\n    input clk, //100MHZ\n    input [1:0] dir, //\u6309\u4e0b\u7684\u8fd0\u52a8\u65b9\u5411\n    input [1:0] game_state, //\u6e38\u620f\u72b6\u6001\uff1a0 \u5f00\u59cb\u754c\u9762\uff0c 1 \u6e38\u620f\u4e2d\uff0c 2 \u7ed3\u675f\u754c\u9762\n    input [9:0] cur_x,// VGA\u5f53\u524dX\u5750\u6807\n    input [8:0] cur_y, //  VGA\u5f53\u4e14Y\u5750\u6807\n    output [2:0] one_state,//(X,Y)\u5750\u6807\u5bf9\u5e94\n    output reg gameover,//\u4f20\u51fa\u6e38\u620f\u7ed3\u675f\u7684\u4fe1\u606f\n    output reg [15:0] score//\u5f97\u5206\n);\n</code></pre> \u5728\u5212\u5206\u540e\u768440*30\u7684\u533a\u57df\u4e0a\u8fdb\u884c\u86c7\u7684\u79fb\u52a8\uff0c - \u901a\u8fc7\u4f20\u5165dir\u4fe1\u53f7\u6765\u63a7\u5236\u86c7\u79fb\u52a8\u7684\u65b9\u5411\uff0c - game_state\u6765\u5224\u65ad\u5f53\u524d\u6e38\u620f\u72b6\u6001\uff0c - cur_x,cur_y,one_state\u6765\u8f93\u51fa\u5f53\u524d\u5750\u6807\u6240\u5728\u5355\u5143\u683c\u7684\u72b6\u6001\u4fe1\u606f\uff0c - gameover\u4f20\u51fa\u6e38\u620f\u7ed3\u675f\u7684\u4fe1\u606f\uff0c - score\u4f20\u51fa\u5f53\u524d\u7684\u5f97\u5206\u3002</p>"},{"location":"LCDF_Report/Report/#52","title":"5.2 \u5b9a\u4e49\u4ee3\u7801","text":"<pre><code>parameter MAX_LENGTH = 100;\nparameter MAX_CNT = 23;\nreg [5:0] head_x; \nreg [4:0] head_y; //\u86c7\u5934\u7684\u5750\u6807\nreg [5:0] next_head_x;\nreg [4:0] next_head_y; //\u4e0b\u4e00\u523b\u86c7\u5934\u7684\u5750\u6807\nreg [5:0] fruit_x;\nreg [4:0] fruit_y;//\u98df\u7269\u5750\u6807\nreg [5:0] body_x [MAX_LENGTH:0];\nreg [4:0] body_y [MAX_LENGTH:0];//\u5b58\u50a8\u86c7\u8eab\u5750\u6807\u7684\u6570\u7ec4\nreg [1:0] current_dir;//\u5f53\u524d\u86c7\u8fd0\u52a8\u7684\u65b9\u5411\nreg [2:0] state [0:39][0:29];//\u6240\u6709\u5355\u5143\u7684\u72b6\u6001\u4fe1\u606f\nreg [23:0] cnt;//\u8ba1\u6570\u4ee5\u5206\u9891\nreg [1:0] state_pos;//\u5b58\u50a8\u4e0a\u4e00\u523b\u548c\u5f53\u524d\u7684\u6e38\u620f\u72b6\u6001\nwire game_clk;//\u6e38\u620f\u9891\u7387\uff08\u901f\u5ea6\uff09\ninteger length;\ninteger i, j;\n\nalways @(posedge clk) begin\n    cnt = cnt + 24'b1;\nend\nassign game_clk=cnt[MAX_CNT];\n\n//\u8ba1\u7b97\u8f6c\u6362\u540e\u7684\u5bf9\u5e94\u5355\u5143\u683c\u5750\u6807\nfunction [5:0] state_x_addr; \n    input [9:0] pix_x;\n    begin\n        state_x_addr  = pix_x &gt;&gt; 4; // x\n    end\nendfunction\n\nfunction [5:0] state_y_addr; \n    input [8:0] pix_y;\n    begin\n        state_y_addr = pix_y &gt;&gt; 4; // y\n    end\nendfunction\n\nassign one_state = state[state_x_addr(cur_x)][state_y_addr(cur_y)];\n</code></pre>"},{"location":"LCDF_Report/Report/#53","title":"5.3 \u521d\u59cb\u5316","text":"<p><pre><code>initial begin\n    cnt = 24'b0;\n    state_pos = 2'b00;\n    head_x = 6'd20;\n    head_y = 5'd15;\n    next_head_x = 6'd20;\n    next_head_y = 5'd15;\n    //fruit_flag = 2'd0;\n    length = 1'd1;\n    fruit_x = 6'd25;\n    fruit_y = 5'd15;\n    body_x[0] = 6'd19;\n    body_y[0] = 6'd15;\n    body_x[1] = 6'd18;\n    body_y[1] = 6'd15;\n    current_dir = 2'd3;\n    score = 16'd0;\n    gameover = 1'b0;\n\n    for (i=0;i&lt;40;i=i+1)begin\n        for (j=0;j&lt;30;j=j+1)begin\n            state[i][j]=3'b000;\n        end\n    end\n    i=0;\n    for (j=0;j&lt;30;j=j+1)begin\n        state[i][j]=3'b110; //state = 6\u4e3a\u6b7b\u4ea1\u683c\n    end\n    i=39;\n    for (j=0;j&lt;30;j=j+1)begin\n        state[i][j]=3'b110; //state = 6\u4e3a\u6b7b\u4ea1\u683c\n    end\n    j=0;\n    for (i=0;i&lt;40;i=i+1)begin\n        state[i][j]=3'b110; //state = 6\u4e3a\u6b7b\u4ea1\u683c\n    end\n    j=29;\n    for (i=0;i&lt;40;i=i+1)begin\n        state[i][j]=3'b110; //state = 6\u4e3a\u6b7b\u4ea1\u683c\n    end\n\n    for (i=2;i&lt;100;i=i+1)begin\n        body_x[i] = 6'd0;\n        body_y[i] = 5'd0;\n    end \n    // \u589e\u52a0\u573a\u5185\u969c\u788d\u7269\n    i = 3;\n    for (j = 34; j &lt;= 36; j = j + 1) begin\n        state[j][i] = 3'b110;\n    end\n    state[36][4] = 3'b110;\n    state[36][5] = 3'b110;\n\n    i = 4;\n    for (j = 4; j &lt;= 11; j = j + 1) begin\n        state[j][i] = 3'b110;\n    end\n\n    j = 4;\n    for (i = 5; i &lt;= 11; i = i + 1) begin\n        state[j][i] = 3'b110; \n    end\n\n    i = 20;\n    for (j = 3; j &lt;= 5; j = j + 1) begin\n        state[j][i] = 3'b110; \n    end\n\n    j = 10;\n    for (i = 20; i &lt;= 28; i = i + 1) begin\n        state[j][i] = 3'b110;\n    end\n\n    i = 10;\n    for (j = 15; j &lt;= 18; j = j + 1) begin\n        state[j][i] = 3'b110; \n    end\n    for (j = 21; j &lt;= 24; j = j + 1) begin\n        state[j][i] = 3'b110; \n    end\n    for (j = 30; j &lt;= 38; j = j + 1) begin\n        state[j][i] = 3'b110; \n    end\n\n    i = 19;\n    for (j = 15; j &lt;= 18; j = j + 1) begin\n        state[j][i] = 3'b110; \n    end\n    for (j = 21; j &lt;= 24; j = j + 1) begin\n        state[j][i] = 3'b110; \n    end\n    for (j = 30; j &lt;= 35; j = j + 1) begin\n        state[j][i] = 3'b110;\n    end\n\n    i = 25;\n    for (j = 15; j &lt;= 35; j = j + 1) begin\n        state[j][i] = 3'b110;\n    end\n\n    j = 15;\n    for (i = 11; i &lt;= 13; i = i + 1) begin\n        state[j][i] = 3'b110;\n    end\n    for (i = 16; i &lt;= 25; i = i + 1) begin\n        state[j][i] = 3'b110;\n    end\n\n    j = 24;\n    for (i = 11; i &lt;= 13; i = i + 1) begin\n        state[j][i] = 3'b110;\n    end\n    for (i = 16; i &lt;= 18; i = i + 1) begin\n        state[j][i] = 3'b110;\n    end\n\n    j = 35;\n    for (i = 19; i &lt;= 24; i = i + 1) begin\n        state[j][i] = 3'b110;\n    end\n    // \u8bbe\u7f6e\u86c7\u7684\u4f4d\u7f6e\n    state[20][6] = 3'b001;\n    state[19][6] = 3'b010;\n    state[18][6] = 3'b010;\n    state[fruit_x][fruit_y] = 3'b011;\nend\n</code></pre> 1. \u521d\u59cb\u8bbe\u5b9a\u86c7\u5934\u5750\u6807(20,15); 2. \u62e5\u6709\u4e24\u4e2a\u8eab\u5b50\uff0c\u5750\u6807\u5206\u522b\u4e3a(19,15)(18,15); 3. \u9ed8\u8ba4\u79fb\u52a8\u65b9\u5411\u4e3a\u53f3\uff1b 4. \u5f62\u6210\u597d\u6240\u6709\u969c\u788d\u7269\u4f4d\u7f6e(\u5c4f\u5e55\u8fb9\u7f18\u4e00\u5708\u4ee5\u53ca\u573a\u5185\u90e8\u5206\u4f4d\u7f6e)</p>"},{"location":"LCDF_Report/Report/#54","title":"5.4 \u91cd\u7f6e\u6e38\u620f","text":"<p><pre><code>always @(posedge game_clk) begin\n    if (game_state[0] == 1'b1 || game_clk == 1'b1) begin\n        state_pos &lt;= {state_pos[0], game_state[0]};\n        if(state_pos == 2'b01)begin\n            head_x &lt;= 6'd20;\n            head_y &lt;= 5'd6;\n            length &lt;= 1'd1;\n            fruit_x &lt;= 6'd29;\n            fruit_y &lt;= 5'd6;\n            body_x[0] &lt;= 6'd19;\n            body_y[0] &lt;= 6'd6;\n            body_x[1] &lt;= 6'd18;\n            body_y[1] &lt;= 6'd6;\n            current_dir &lt;= 2'd3;\n            score &lt;= 16'd0;\n            // cnt &lt;= 0;\n            gameover &lt;= 1'b0;\n\n            for (i = 0; i &lt; 40; i = i + 1)begin\n                for (j = 0; j &lt; 30; j = j + 1) begin\n                    state[i][j] &lt;=  3'b000;\n                end\n            end\n            i = 0;\n            for (j = 0; j &lt; 30; j = j + 1)begin\n                state[i][j] &lt;=  3'b110; //state  =  6\u4e3a\u6b7b\n            end\n            i = 39;\n            for (j = 0; j &lt; 30; j = j + 1)begin\n                state[i][j] &lt;=  3'b110; //state  =  6\u4e3a\u6b7b\n            end\n            j = 0;\n            for (i = 0; i &lt; 40; i = i + 1)begin\n                state[i][j] &lt;=  3'b110; //state  =  6\u4e3a\u6b7b\n            end\n            j = 29;\n            for (i = 0; i &lt; 40; i = i + 1)begin\n                state[i][j] &lt;=  3'b110; //state  =  6\u4e3a\u6b7b\n            end\n\n            for (i = 2; i &lt; 100; i = i + 1)begin\n                body_x[i] &lt;= 6'd0;\n                body_y[i] &lt;= 5'd0;\n            end\n\n            // \u589e\u52a0\u5730\u56fe\n            i = 3;\n            for (j = 34; j &lt;= 36; j = j + 1) begin\n                state[j][i] &lt;= 3'b110;\n            end\n            state[36][4] &lt;= 3'b110;\n            state[36][5] &lt;= 3'b110;\n\n            i = 4;\n            for (j = 4; j &lt;= 11; j = j + 1) begin\n                state[j][i] &lt;= 3'b110;\n            end\n\n            j = 4;\n            for (i = 5; i &lt;= 11; i = i + 1) begin\n                state[j][i] &lt;= 3'b110; \n            end\n\n            i = 20;\n            for (j = 3; j &lt;= 5; j = j + 1) begin\n                state[j][i] &lt;= 3'b110; \n            end\n\n            j = 10;\n            for (i = 20; i &lt;= 28; i = i + 1) begin\n                state[j][i] &lt;= 3'b110;\n            end\n\n            i = 10;\n            for (j = 15; j &lt;= 18; j = j + 1) begin\n                state[j][i] &lt;= 3'b110; \n            end\n            for (j = 21; j &lt;= 24; j = j + 1) begin\n                state[j][i] &lt;= 3'b110; \n            end\n            for (j = 30; j &lt;= 38; j = j + 1) begin\n                state[j][i] &lt;= 3'b110; \n            end\n\n            i = 19;\n            for (j = 15; j &lt;= 18; j = j + 1) begin\n                state[j][i] &lt;= 3'b110; \n            end\n            for (j = 21; j &lt;= 24; j = j + 1) begin\n                state[j][i] &lt;= 3'b110; \n            end\n            for (j = 30; j &lt;= 35; j = j + 1) begin\n                state[j][i] &lt;= 3'b110;\n            end\n\n            i = 25;\n            for (j = 15; j &lt;= 35; j = j + 1) begin\n                state[j][i] &lt;= 3'b110;\n            end\n\n            j = 15;\n            for (i = 11; i &lt;= 13; i = i + 1) begin\n                state[j][i] &lt;= 3'b110;\n            end\n            for (i = 16; i &lt;= 25; i = i + 1) begin\n                state[j][i] &lt;= 3'b110;\n            end\n\n            j = 24;\n            for (i = 11; i &lt;= 13; i = i + 1) begin\n                state[j][i] &lt;= 3'b110;\n            end\n            for (i = 16; i &lt;= 18; i = i + 1) begin\n                state[j][i] &lt;= 3'b110;\n            end\n\n            j = 35;\n            for (i = 19; i &lt;= 24; i = i + 1) begin\n                state[j][i] &lt;= 3'b110;\n            end\n            // \u8bbe\u7f6e\u86c7\u7684\u4f4d\u7f6e\n            state[20][6] = 3'b001;\n            state[19][6] = 3'b010;\n            state[18][6] = 3'b010;\n            state[fruit_x][fruit_y] = 3'b011;\n</code></pre> <code>state_pos &lt;= {state_pos[0], game_state[0]};</code>\uff0c\u5f53game_state\u7ef4\u6301\u57281\u65f6\uff0cstate_pos \u7a33\u5b9a\u4e3a 2'b11\uff1b\u6bcf\u5f53game_state\u4ece0\u53d8\u5316\u4e3a1\u65f6\uff0c\u6240\u6709\u6e38\u620f\u6570\u636e\u4f1a\u88ab\u91cd\u7f6e\uff0c\u56de\u5230\u521d\u59cb\u8bbe\u7f6e\u3002</p>"},{"location":"LCDF_Report/Report/#55","title":"5.5 \u86c7\u7684\u8fd0\u52a8","text":"<p>\u901a\u8fc7\u86c7\u5934\u63a7\u5236\u86c7\u7684\u8fd0\u52a8\uff0c\u800c\u86c7\u7684\u8fd0\u52a8\u7c7b\u578b\u4e3b\u8981\u5206\u4e3a\u4e09\u7c7b\uff0c\u5206\u522b\u662f\u79fb\u52a8\u5230\u7a7a\u767d\u683c\u3001\u89e6\u78b0\u5230\u8eab\u4f53\u6216\u969c\u788d\u7269\u3001\u5403\u5230\u98df\u7269\uff1b\u4e09\u79cd\u8fd0\u52a8\u7c7b\u578b\u5206\u522b\u6709\u5bf9\u5e94\u7684\u4ee3\u7801\u5904\u7406\uff1a</p>"},{"location":"LCDF_Report/Report/#551","title":"5.5.1 \u65b9\u5411\u63a7\u5236","text":"<p><pre><code>else if (game_clk) begin\n    if (game_state[0]) begin\n        case(current_dir)\n            2'd0:begin\n                next_head_x = head_x;\n                next_head_y = head_y - 1; //0 \u5411\u4e0a\u79fb\u52a8\n            end\n            2'd1:begin\n                next_head_x = head_x;\n                next_head_y = head_y + 1;//1 \u5411\u4e0b\u79fb\u52a8\n            end\n            2'd2:begin\n                next_head_x = head_x - 1;\n                next_head_y = head_y;//2 \u5411\u5de6\u79fb\u52a8\n            end\n            2'd3:begin\n                next_head_x = head_x + 1;\n                next_head_y = head_y;//3 \u5411\u53f3\u79fb\u52a8\n            end\n        endcase\n\ncase(dir)\n    2'd0: if (current_dir != 2'd1) current_dir &lt;= 2'd0;\n    2'd1: if (current_dir != 2'd0) current_dir &lt;= 2'd1;\n    2'd2: if (current_dir != 2'd3) current_dir &lt;= 2'd2;\n    2'd3: if (current_dir != 2'd2) current_dir &lt;= 2'd3;\nendcase\n</code></pre> - \u5904\u7406<code>current_dir</code>\u4fe1\u53f7\uff0c\u7136\u540e0-3\u5206\u522b\u6620\u5c04\u4e0a\u4e0b\u5de6\u53f3\u63a7\u5236\u4e0b\u4e00\u523b\u86c7\u5934\u4f4d\u7f6e\uff1b - \u5904\u7406\u4f20\u5165\u7684<code>dir</code>\u4fe1\u53f7\uff0c\u6765\u6539\u53d8<code>current_dir</code>\uff0c\u540c\u65f6\u9632\u6b62\u6309\u8fd0\u52a8\u53cd\u65b9\u5411\u77ac\u6b7b\u60c5\u51b5</p>"},{"location":"LCDF_Report/Report/#552","title":"5.5.2 \u89e6\u78b0\u969c\u788d\u6216\u8eab\u4f53","text":"<p><pre><code>if (state[next_head_x][next_head_y] == 3'b110 || state[next_head_x][next_head_y] == 3'b010) begin\n    gameover &lt;= 1'b1;\nend\n</code></pre> \u5224\u65ad\u4e0b\u4e00\u65f6\u523b\u5934\u6240\u5904\u4f4d\u7f6e\u7684\u72b6\u6001\uff0c<code>3'b110</code>\u548c<code>3'b010</code>\u5206\u522b\u5bf9\u5e94\u969c\u788d\u683c\u4ee5\u53ca\u86c7\u8eab\uff0c\u518d\u66f4\u6539<code>gameover</code>\u4fe1\u53f7\u4e3a1\uff0c<code>gameover</code>\u4f20\u51fa\u5230\u72b6\u6001\u673a\u6a21\u5757\u540e\u4f7f\u5f97\u6e38\u620f\u72b6\u6001\u8fdb\u5165\u7ed3\u675f\u6001\u3002</p>"},{"location":"LCDF_Report/Report/#553","title":"5.5.3 \u79fb\u52a8\u5230\u7a7a\u767d\u683c","text":"<p><pre><code>else if (state[next_head_x][next_head_y] == 3'b000) begin\n    state[next_head_x][next_head_y] = 3'b001; //\u4e0b\u4e00\u683c\u53d8\u4e3a\u86c7\u5934\n    state[head_x][head_y] = 3'b010;//\u539f\u86c7\u5934\u5904\u53d8\u4e3a\u86c7\u8eab\n    state[body_x[length]][body_y[length]] = 3'b000;//\n    for (i = MAX_LENGTH; i &gt; 0; i = i - 1) begin\n        body_x[i] = body_x[i - 1];\n        body_y[i] = body_y[i - 1];\n    end //\u632a\u52a8\u8eab\u4f53\u6570\u7ec4\n    body_x[0] = head_x;\n    body_y[0] = head_y;\n    head_x = next_head_x;\n    head_y = next_head_y;\nend \n</code></pre> 1. \u9996\u5148\u5224\u65ad\u86c7\u5934\u4e0b\u4e00\u523b\u79fb\u52a8\u5230\u7a7a\u767d\u683c(<code>3'b000</code>) 2. \u5c06\u5bf9\u5e94\u683c\u72b6\u6001\u8bbe\u7f6e\u6210\u86c7\u5934(3'b001) 3. \u539f\u6765\u86c7\u5934\u7684\u4f4d\u7f6e\u4f1a\u53d8\u6210\u86c7\u8eab(<code>3'b010</code>) 4. \u632a\u52a8\u5b58\u50a8\u86c7\u8eab\u7684\u6570\u7ec4\u5143\u7d20\uff0c\u4ee5\u66f4\u6539\u7d22\u5f15\u548c\u76f8\u5bf9\u4f4d\u7f6e\u95f4\u7684\u5173\u7cfb</p>"},{"location":"LCDF_Report/Report/#554","title":"5.5.4 \u5403\u5230\u98df\u7269","text":"<p><pre><code>else begin\n    case (state[next_head_x][next_head_y])\n        3'b011: score = score + 16'd1;\n        3'b100: score = score + 16'd2;\n        3'b101: score = score + 16'd3;\n    endcase\n    length = length + 1'd1;\n    state[next_head_x][next_head_y] = 3'b001;\n    state[head_x][head_y] = 3'b010;\n    for(i = MAX_LENGTH; i &gt; 0; i = i - 1)begin\n        body_x[i] = body_x[i - 1];\n        body_y[i] = body_y[i - 1];\n    end\n    body_x[0] = head_x;\n    body_y[0] = head_y;\n    head_x = next_head_x;\n    head_y = next_head_y;\n\n    for (i = 0; i &lt;= 40 &amp;&amp; state[fruit_x][fruit_y] != 3'b000; i = i + 1) begin\n        fruit_x = (fruit_x + 5 + i) % 40;\n        fruit_y = (fruit_y + 5 + j) % 30;\n        if (j &lt;= 30) begin\n            j = j + 1;\n        end else begin\n            j = 0;\n        end\n    end\n    //\u901a\u8fc7\u5728\u539f\u98df\u7269\u4f4d\u7f6e\u5468\u56f4\u7ebf\u6027\u641c\u7d22\u7a7a\u767d\u683c\u7684\u65b9\u6cd5\u4ee5\u751f\u6210\u65b0\u98df\u7269\n    case ((i + j) % 6)\n        3'd0: state[fruit_x][fruit_y] = 3'b011; //state  =  3\u4e3a\u679c\n        3'd1: state[fruit_x][fruit_y] = 3'b011; \n        3'd2: state[fruit_x][fruit_y] = 3'b011; //\u751f\u6210Small_Food\u7684\u76f8\u5bf9\u6982\u7387\u4e3a1/2\n        3'd3: state[fruit_x][fruit_y] = 3'b100; //state  =  5\u4e3a\u679c\n        3'd4: state[fruit_x][fruit_y] = 3'b100; //\u751f\u6210Medium_Food\u7684\u76f8\u5bf9\u6982\u7387\u4e3a1/3\n        3'd5: state[fruit_x][fruit_y] = 3'b101; //state  =  5\u4e3a\u679c,\u751f\u6210Large_Food\u7684\u76f8\u5bf9\u6982\u7387\u4e3a1/6\n    endcase\n</code></pre> 1. \u5224\u65ad\u4e0b\u4e00\u65f6\u523b\u86c7\u5934\u79fb\u52a8\u5230\u7684\u4f4d\u7f6e\u7684\u72b6\u6001\uff0c\u4ee5\u83b7\u5f97\u4e0d\u540c\u7684\u5f97\u5206(<code>3'b011</code>\u4e3a\u5c0f\u679c\u5b9e\uff0c1\u5206\uff1b<code>3'b100</code>\u4e3a\u4e2d\u679c\u5b9e\uff0c2\u5206\uff1b<code>3'b101</code>\u4e3a\u5927\u679c\u5b9e\uff0c3\u5206); 2. \u901a\u8fc7\u548c\u79fb\u52a8\u5230\u7a7a\u767d\u683c\u65f6\u7c7b\u4f3c\u7684\u65b9\u6cd5\u6765\u589e\u957f\u957f\u5ea6 3. \u901a\u8fc7\u5728\u539f\u98df\u7269\u4f4d\u7f6e\u5468\u56f4\u7ebf\u6027\u641c\u7d22\u7a7a\u767d\u683c\u7684\u65b9\u6cd5\u4ee5\u751f\u6210\u65b0\u98df\u7269 4. \u6700\u540e\u968f\u673a\u786e\u5b9a\u679c\u5b9e\u7684\u79cd\u7c7b\uff0c\u5e76\u6539\u53d8\u5bf9\u5e94\u4f4d\u7f6e\u5355\u5143\u683c\u72b6\u6001</p>"},{"location":"LCDF_Report/report_2/","title":"\u4eff\u771f\u4e0e\u8c03\u8bd5\u8fc7\u7a0b\u5206\u6790","text":""},{"location":"LCDF_Report/report_2/#1ps2","title":"1.PS2","text":""},{"location":"LCDF_Report/report_2/#_2","title":"\u4e0a\u7248\u529f\u80fd\u9a8c\u8bc1","text":"<p>\u5c06\u56db\u4e2a\u4fe1\u53f7\u5bf9\u5e94\u56db\u4e2aLED\u706f\uff0c\u4e0a\u677f\u7ed3\u679c\u5982\u4e0b\uff1a   \u4e0a\u677f\u7ed3\u679c\u5206\u6790\uff1a\u6210\u529f\u8bfb\u53d6\u56db\u4e2a\u6309\u952e\u7684\u4fe1\u53f7\uff0cPS2\u7f16\u5199\u6b63\u786e\u3002</p>"},{"location":"LCDF_Report/report_2/#2vga","title":"2.VGA","text":""},{"location":"LCDF_Report/report_2/#_3","title":"\u4eff\u771f\u6d4b\u8bd5","text":"<p>\u7531\u4e8e\u5355\u72ec\u6d4b\u8bd5\u8be5\u6a21\u5757\uff0c\u5199\u4e86\u4e00\u4e2a\u4e34\u65f6\u7684\u8ba1\u7b97 $state$ \u53d8\u91cf\u7684\u6a21\u5757\u7528\u4e8e\u6d4b\u8bd5\uff1a</p> <pre><code>module target_v(\n    input [9:0] cell_x,\n    input [8:0] cell_y,\n    output reg [2:0] state\n    );\n\n    wire [5:0] cell_addr_x; // \u5355\u5143\u683c x \u5750\u6807\n    wire [4:0] cell_addr_y; // \u5355\u5143\u683c y \u5750\u6807\n\n    parameter H_PIC = 10'd16;\n\n    assign cell_addr_x = cell_x / H_PIC; // \u8ba1\u7b97\u5355\u5143\u683c x \u5750\u6807\n    assign cell_addr_y = cell_y / H_PIC; // \u8ba1\u7b97\u5355\u5143\u683c y \u5750\u6807\n\n    always @(cell_x or cell_y) begin // \u8bbe\u7f6e\u76f8\u5e94\u7684\u5355\u5143\u683c\u72b6\u6001\n        if (cell_addr_x == 6'd1 &amp;&amp; cell_addr_y == 5'd1) begin\n            state = 3'd1;\n        end else if (cell_addr_x == 6'd2 &amp;&amp; cell_addr_y == 5'd1) begin\n            state = 3'd2;\n        end else if (cell_addr_x == 6'd3 &amp;&amp; cell_addr_y == 5'd1) begin\n            state = 3'd3;\n        end else if (cell_addr_x == 6'd4 &amp;&amp; cell_addr_y == 5'd2) begin\n            state = 3'd4;\n        end else if (cell_addr_x == 6'd5 &amp;&amp; cell_addr_y == 5'd2) begin\n            state = 3'd5;\n        end else if (cell_addr_x == 6'd6 &amp;&amp; cell_addr_y == 5'd2) begin\n            state = 3'd6;\n        end else begin\n            state = 3'd0;\n        end\n    end\nendmodule\n</code></pre> <p>\u4e34\u65f6 $top$ \u6a21\u5757\uff1a</p> <pre><code>module vga_top(\n    input clk,\n    output [3:0] R, G, B,\n    output HS, VS\n    );\n\n    wire vga_clk;\n    wire [11:0] pixel;\n    wire [8:0] pix_y;\n    wire [9:0] pix_x;\n    wire [2:0] state;\n\n    parameter game_state = 2'b10; // \u5c06 game_state \u53d8\u91cf\u8bbe\u7f6e\u4e3a\u53c2\u6570\uff0c\u4fbf\u4e8e\u5728testbench\u6587\u4ef6\u4e2d\u4fee\u6539\n    parameter H_PIC = 5'd16;\n\n    function [9:0] cell_x; // \u8ba1\u7b97\u50cf\u7d20\u70b9\u5bf9\u5e94\u5355\u5143\u683c\u7684\u5de6\u4e0a\u89d2x\u5750\u6807\n        input [9:0] pix_x;\n        begin\n            cell_x = (pix_x &gt;&gt; 4) * H_PIC;\n        end\n    endfunction\n\n    function [8:0] cell_y; // \u8ba1\u7b97\u50cf\u7d20\u70b9\u5bf9\u5e94\u5355\u5143\u683c\u7684\u5de6\u4e0a\u89d2y\u5750\u6807\n        input [8:0] pix_y;\n        begin\n            cell_y = (pix_y &gt;&gt; 4) * H_PIC;\n        end\n    endfunction\n\n    clk_gen ck_gen0(.clk(clk), .vga_clk(vga_clk));\n    vga_ctrl vga_ctrl0(.clk(vga_clk), .rst(1'b0), .Din({pixel[3:0], pixel[7:4], pixel[11:8]}), \n                        .row(pix_y), .col(pix_x), .R(R), .G(G), .B(B), .HS(HS), .VS(VS));\n    target_v gen_state(.cell_x(cell_x(pix_x)), .cell_y(cell_y(pix_y)), .state(state));\n    vga_screen_pic vga_screen_pic0(.clk(clk), .pix_x(pix_x), .pix_y(pix_y),\n                                    .state(state), .game_state(game_state), .pix_data_out(pixel));\nendmodule\n</code></pre> <p>$testbench$ \u6587\u4ef6\uff1a</p> <pre><code>module vga_tb();\n    reg clk;\n    wire [3:0] R, G, B;\n    wire HS, VS;\n\n    vga_top test(.clk(clk), .R(R), .G(G), .B(B), .HS(HS), .VS(VS));\n\n    // \u5207\u6362\u6e38\u620f\u72b6\u6001\n    defparam test.game_state = 2'b00; // \u6e38\u620f\u5f85\u5f00\u59cb\n    // defparam test.game_state = 2'b01; // \u6e38\u620f\u8fdb\u884c\u4e2d\n    // defparam test.game_state = 2'b10; // \u6e38\u620f\u7ed3\u675f\n\n    initial begin\n        clk = 1'b1;\n    end\n\n    always begin\n        clk = ~clk;\n        #5;\n    end\nendmodule\n</code></pre>"},{"location":"LCDF_Report/report_2/#_4","title":"\u6e38\u620f\u5f00\u59cb","text":"<p>\u6574\u4f53\u56fe\u7247\uff1a</p> <p></p> <p>\u5c40\u90e8\u7ec6\u8282\uff1a</p> <p></p> <p>\u7ecf\u6bd4\u5bf9\uff0c\u8be5\u6570\u636e\u4e0e $.coe$ \u6587\u4ef6\u4e2d\u7684\u6570\u636e\u76f8\u540c\u3002</p>"},{"location":"LCDF_Report/report_2/#3","title":"3.\u8702\u9e23\u5668","text":""},{"location":"LCDF_Report/report_2/#_5","title":"\u4eff\u771f\u6d4b\u8bd5","text":"<p>$testbench$ \u6587\u4ef6\uff1a</p> <pre><code>module beep_tb();\n    reg clk;\n    reg [1:0] game_state;\n\n    wire beep;\n\n    top_beep test(.clk(clk), .game_state(game_state), .beep(beep));\n\n    // \u4fee\u6539\u53c2\u6570\uff0c\u7f29\u77ed\u4eff\u771f\u65f6\u95f4\n    defparam test.bp_go.TIME_125ms = 24'd1249;\n    defparam test.bp_go.AS_4 = 18'd21;\n    defparam test.bp_go.A4 = 18'd22;\n    defparam test.bp_go.GS_4 = 18'd24;\n    defparam test.bp_go.G4 = 18'd25;\n\n    defparam test.bp_gs.TIME_125ms = 24'd1249;\n    defparam test.bp_gs.A4 = 19'd22;\n    defparam test.bp_gs.D5 = 19'd17;\n    defparam test.bp_gs.C5 = 19'd19;\n    defparam test.bp_gs.B4 = 19'd20;\n    defparam test.bp_gs.FS_4 = 19'd27;\n    defparam test.bp_gs.G4 = 19'd25;\n    defparam test.bp_gs.D4 = 19'd37;\n    defparam test.bp_gs.E4 = 19'd30;\n    defparam test.bp_gs.F4 = 19'd28;\n    defparam test.bp_gs.C4 = 19'd38;\n\n    defparam test.TIME_125ms = 26'd6250;\n\n    initial begin\n        clk = 1'b1;\n        game_state = 2'b00;\n        #100000;\n        game_state = 2'b01;\n        #100000;\n        game_state = 2'b10;\n    end\n\n    always begin\n        clk = ~clk;\n        #5;\n    end\nendmodule\n</code></pre> <p>\u4eff\u771f\u7ed3\u679c\u5df2\u5728\u89e3\u91ca\u5b9e\u73b0\u6b65\u9aa4\u65f6\u5c55\u793a\u3002</p>"},{"location":"LCDF_Report/report_2/#4","title":"4.\u72b6\u6001\u673a","text":""},{"location":"LCDF_Report/report_2/#_6","title":"\u4eff\u771f\u4ee3\u7801","text":"<pre><code>module test_state(\n\n    );\n    reg rst;\n    reg clk;\n    reg start_button;\n\n    initial begin\n        rst=1'b0;\n        clk=1'b1;\n        start_button=1'b0;\n    end\n\n    always begin\n        #5 clk=~clk;\n    end\n    always begin\n        #100000 rst=1;\n        #100000 start_button=1;\n        #10 start_button=0;\n    end\n\n    wire HS,VS;\n    wire R,G,B;\n    wire AN;\n    wire SEG;\n    wire LED;\n    wire beep;\n    top top(.rst(rst),.clk(clk),.start_button(start_button),.ps2_clk(1'b0),.ps2_data(1'b0),.VS(VS),.HS(HS),.R(R),.G(G),.B(B));\n    defparam top.run_module0.MAX_CNT =7;\nendmodule\n</code></pre>"},{"location":"LCDF_Report/report_2/#_7","title":"\u4eff\u771f\u7ed3\u679c","text":"<p> \u6e38\u620f\u521d\u59cb\u4e3a\u5f00\u59cb\u754c\u9762\u72b6\u6001(<code>2'b00</code>)rst\u59cb\u7ec8\u7f6e1\uff0c\u5f53<code>start_button</code>\u7f6e1\u65f6\u6e38\u620f\u8fdb\u5165\u6e38\u73a9\u4e2d\u72b6\u6001(<code>2'b01</code>)\uff1b\u5f53gameover\u7f6e\u4e3a1\u65f6\uff0c\u6e38\u620f\u8fdb\u5165\u7ed3\u675f\u72b6\u6001(<code>2'b10</code>)\uff1b\u5f53<code>start_button</code>\u518d\u6b21\u7f6e\u4e3a1\u65f6\uff0c<code>gameover</code>\u91cd\u7f6e\u4e3a0\uff0c\u540c\u65f6\u6e38\u620f\u72b6\u6001\u91cd\u7f6e\u4e3a\u6e38\u73a9\u4e2d(<code>2'b01</code>)</p>"},{"location":"LCDF_Report/report_2/#5","title":"5.\u8fd0\u52a8\u6a21\u5757","text":""},{"location":"LCDF_Report/report_2/#51","title":"5.1 \u65b9\u5411\u63a7\u5236\u4eff\u771f\u6d4b\u8bd5","text":"<p><pre><code>module test_state(\n\n    );\n    reg rst;\n    reg clk;\n    reg start_button;\n    reg [1:0]dir;\n\n    initial begin\n        rst=1'b0;\n        clk=1'b1;\n        start_button=1'b0;\n        dir=2'b00;\n    end\n    // always begin\n    //     #100 start_button=1;\n    //     #100 start_button=0;\n    // end\n    always begin\n        #5 clk=~clk;\n    end\n    always begin\n        #100000 rst=1;\n        #100000 start_button=1;\n        #10 start_button=0;\n    end\n    always begin\n        #1000 dir=2'b00;\n        #1000 dir=2'b01;\n        #1000 dir=2'b10;\n        #1000 dir=2'b11;\n    end\n    wire HS,VS;\n    wire R,G,B;\n    wire AN;\n    wire SEG;\n    wire LED;\n    wire beep;\n    top top(.rst(rst),.clk(clk),.start_button(start_button),.ps2_clk(1'b0),.ps2_data(1'b0),.VS(VS),.HS(HS),.R(R),.G(G),.B(B));\n\n    defparam top.run_module0.MAX_CNT =7;\nendmodule\n</code></pre>  \u6d4b\u8bd5\u6bcf1000ns\u6539\u53d8\u4e00\u6b21dir\u4fe1\u53f7\uff1a\u6bcf\u5f53<code>game_clk</code>\u4e3a\u6b63\u8fb9\u6cbf\u65f6\uff0c\u6539\u53d8<code>current_dir</code>\u4e3a<code>dir</code>\uff0c\u540c\u65f6\u6709\u9650\u5236\u6761\u4ef6\uff1a\u5f53\u6b32\u6539\u53d8\u65b9\u5411\u4e0e\u8fd0\u52a8\u65b9\u5411\u76f8\u53cd\u65f6\uff0c\u4e0d\u4f1a\u53d1\u751f\u6539\u53d8\u3002</p> <p>\u6fc0\u52b1\u56fe\u4e2d\uff0c\u86c7\u5206\u522b\u53d1\u751f\u5411\u4e0a\u3001\u5411\u53f3\u3001\u5411\u4e0b\u3001\u5411\u5de6\u7684\u8fd0\u52a8\uff0cxy\u5750\u6807\u53d1\u751f\u5bf9\u5e94\u6b63\u786e\u7684\u53d8\u5316\u3002</p>"},{"location":"LCDF_Report/report_2/#52","title":"5.2 \u89e6\u78b0\u969c\u788d\u6216\u8eab\u4f53","text":"<p>\u89e6\u78b0\u8eab\u4f53\uff1a  \u4eba\u4e3a\u5728 (30,15)\u653e\u7f6e\u4e86\u4e00\u4e2a\u4e0d\u52a8\u7684\u8eab\u4f53\u5757(\u5373<code>state[30][15]=3'b010</code>)\uff0c\u5f53head\u5750\u6807\u79fb\u52a8\u5230(30,15)\u65f6<code>gameover</code>\u7f6e1\uff0c\u6e38\u620f\u7ed3\u675f\u3002</p> <p>\u89e6\u78b0\u969c\u788d\uff1a  \u521d\u59cb\u4e0d\u6539\u53d8\u86c7\u79fb\u52a8\u65b9\u5411\uff0c\u5f84\u76f4\u5411\u53f3\u79fb\u52a8\u5230\u6700\u8fb9\u754c(39,15)\uff0c<code>gameover</code>\u7f6e1\uff0c\u6e38\u620f\u7ed3\u675f</p>"},{"location":"LCDF_Report/report_2/#53","title":"5.3 \u79fb\u52a8\u5230\u7a7a\u767d\u683c","text":"<p> \u56fe\u4e2d\u76d1\u6d4b\u4e86\u86c7\u5934\u7684x\u5750\u6807\u548c\u4e24\u4e2a\u8eab\u5b50\u7684\u5750\u6807\uff0c\u4ee5\u53ca\u9014\u5f84\u7684(21,15)(22,15)(23,15)(24,15)\u56db\u5904\u4f4d\u7f6e\u7684\u72b6\u6001\u53d8\u5316\uff1b</p> <p>\u53ef\u4ee5\u6e05\u695a\u770b\u5230\u86c7\u5934\u5750\u6807\u6b63\u786e\u589e\u52a0\u7684\u540c\u65f6\uff0c\u8eab\u5b50\u5750\u6807\u968f\u4e4b\u632a\u52a8\uff0c\u5e76\u4e14\u6cbf\u9014\u683c\u5b50\u4f9d\u6b21\u72b6\u6001\u4ece\u7a7a\u767d\u53d8\u4e3a\u5934\u3001\u8eab\u518d\u5230\u7a7a\u767d</p>"},{"location":"LCDF_Report/report_2/#54","title":"5.4 \u5403\u5230\u98df\u7269","text":"<p> \u521d\u59cb\u5728(25,15)\u653e\u7f6e\u4e86\u5c0f\u98df\u7269\uff0c\u5728\u86c7\u5934\u62b5\u8fbe\u524dscore=0\u548clength=1\uff1b \u5f53\u5403\u5230\u98df\u7269\u540e\uff0c\u65b0\u4ea7\u751f\u968f\u673a\u7684\u98df\u7269\u5750\u6807\uff0c\u5e76\u4e14\u8eab\u4f53\u589e\u957f\uff0cbody_x[3]\u51fa\u73b0\u65b0\u7684\u503c\uff0clength\u589e\u957f\uff0cscore\u589e\u52a0</p>"},{"location":"LCDF_Report/report_2/#_8","title":"\u4e0a\u677f\u7ed3\u679c\u5206\u6790","text":""},{"location":"LCDF_Report/report_2/#_9","title":"\u5c0f\u7ec4\u6210\u5458\u5206\u5de5\u53ca\u8d21\u732e\u6bd4\u4f8b","text":""},{"location":"LCDF_Report/report_2/#_10","title":"\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\u6240\u53c2\u8003\u7684\u6240\u6709\u4ee3\u7801\u7684\u94fe\u63a5","text":""}]}